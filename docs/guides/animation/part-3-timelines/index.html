<!DOCTYPE html>
<html lang="en">
  
  <head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="generator" content="Typelevel Laika + Helium Theme" />
  <title>Part 3: Timeline Animations</title>
  
  
  <meta name="description" content="An FP game engine for Scala."/>
  
  
  
  <link rel="icon" sizes="32x32" type="image/png" href="../../../img/favicon.png"/>
  
  
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lato:400,700">
  
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Fira+Mono:500">
  
  <link rel="stylesheet" type="text/css" href="../../../helium/site/icofont.min.css" />
    <link rel="stylesheet" type="text/css" href="../../../helium/site/laika-helium.css" />
    <link rel="stylesheet" type="text/css" href="../../../css/custom.css" />
  <script src="../../../helium/site/laika-helium.js"></script>
  
  
  <script> /* for avoiding page load transitions */ </script>
</head>

  <body>

    <header id="top-bar" class="light-default dark-default">

  <div class="row">
    <a id="nav-icon">
      <i class="icofont-laika navigationMenu" title="Navigation">&#xefa2;</i>
    </a>
    
    
  </div>

  <a class="image-link" href="../../../documentation/"><img src="../../../img/indigo_logo_solid_text.svg" alt="An FP game engine for Scala." title="Indigo" width="150" height="50"></a>

  <div class="row links">
    
    <a class="button-link" href="https://purplekingdomgames.github.io/indigo-docs/live_demos">Live Demos</a>
    
    <a class="button-link" href="https://discord.gg/b5CD47g">Discord</a>
    
    <a class="button-link" href="https://github.com/PurpleKingdomGames/indigo">Github</a>
    
  </div>  

</header>
    
    <nav id="sidebar">

  <div class="row">
    
    <a class="button-link" href="https://purplekingdomgames.github.io/indigo-docs/live_demos">Live Demos</a>
    
    <a class="button-link" href="https://discord.gg/b5CD47g">Discord</a>
    
    <a class="button-link" href="https://github.com/PurpleKingdomGames/indigo">Github</a>
    
  </div>

  <ul class="nav-list">
    <li class="level1 nav-node"><a href="../../../documentation/">Indigo</a></li>
    <li class="level2 nav-header">Indigo</li>
    <li class="level3 nav-leaf"><a href="../../../documentation/key-concepts/model-viewmodel-view.html">Model, ViewModel, &amp; View</a></li>
    <li class="level3 nav-leaf"><a href="../../../documentation/key-concepts/time.html">Time</a></li>
    <li class="level3 nav-leaf"><a href="../../../documentation/key-concepts/performance.html">Performance</a></li>
    <li class="level3 nav-leaf"><a href="../../../documentation/key-concepts/making-games-testable.html">Making games testable</a></li>
    <li class="level2 nav-header">Shaders</li>
    <li class="level3 nav-leaf"><a href="../../../documentation/shaders/shaders.html">Shaders</a></li>
    <li class="level2 nav-header">Quick start</li>
    <li class="level3 nav-leaf"><a href="../../../documentation/quickstart/extensions-and-libs.html">Extensions, Libraries, and Related Projects</a></li>
    <li class="level3 nav-leaf"><a href="../../../documentation/quickstart/quickstart.html">Quick start</a></li>
    <li class="level3 nav-leaf"><a href="../../../documentation/quickstart/examples.html">Examples, Demos, and References</a></li>
    <li class="level2 nav-header">General information</li>
    <li class="level3 nav-leaf"><a href="../../../documentation/misc/prior-art.html">Prior Art</a></li>
    <li class="level3 nav-leaf"><a href="../../../documentation/misc/motivation-and-constraints.html">Motivation &amp; Constraints</a></li>
    <li class="level3 nav-leaf"><a href="../../../documentation/misc/rendering-technology.html">Rendering Technology</a></li>
    <li class="level3 nav-leaf"><a href="../../../documentation/misc/indigo-vs-elm.html">Indigo vs Elm</a></li>
    <li class="level1 nav-node"><a href="../../../demos/">Demos</a></li>
    <li class="level2 nav-leaf"><a href="../../../demos/snake/">Snake!</a></li>
    <li class="level2 nav-leaf"><a href="../../../demos/snake-in-5-minutes/">Snake In 5 Minutes</a></li>
    <li class="level2 nav-leaf"><a href="../../../demos/the-cursed-pirate/">The Cursed Pirate!</a></li>
    <li class="level1 nav-node"><a href="../../">Guides</a></li>
    <li class="level2 nav-node"><a href="../../actors/">Actors</a></li>
    <li class="level3 nav-leaf"><a href="../../actors/actors-with-physics/">How to use physics with actors</a></li>
    <li class="level2 nav-node"><a href="../">Animation</a></li>
    <li class="level3 nav-leaf"><a href="../part-1-basics/">Part 1: Animation Fundamentals</a></li>
    <li class="level3 nav-leaf"><a href="../part-2-signals/">Part 2: Using Signals</a></li>
    <li class="level3 active nav-leaf"><a href="#">Part 3: Timeline Animations</a></li>
    <li class="level3 nav-leaf"><a href="../part-4-shaders/">Part 4: Shader Animations</a></li>
    <li class="level2 nav-node"><a href="../../assets/">Assets</a></li>
    <li class="level3 nav-leaf"><a href="../../assets/preloader/">Preloader / Loading Screens</a></li>
    <li class="level2 nav-node"><a href="../../importers/">Importers</a></li>
    <li class="level3 nav-leaf"><a href="../../importers/aseprite-embedded/">Aseprite Embedded</a></li>
    <li class="level3 nav-leaf"><a href="../../importers/tiled-loaded/">Loading Tiled maps at runtime</a></li>
    <li class="level2 nav-node"><a href="../../scenes/">Scenes</a></li>
    <li class="level3 nav-leaf"><a href="../../scenes/scene-management/">Managing scenes</a></li>
    <li class="level2 nav-node"><a href="../../ui/">Ui</a></li>
    <li class="level3 nav-leaf"><a href="../../ui/radiobuttons/">How to make radio buttons</a></li>
    <li class="level1 nav-node"><a href="../../../features/">Features</a></li>
    <li class="level2 nav-node"><a href="../../../features/actors-and-performers/">Actors-and-performers</a></li>
    <li class="level3 nav-leaf"><a href="../../../features/actors-and-performers/actors/">Actors</a></li>
    <li class="level3 nav-leaf"><a href="../../../features/actors-and-performers/performers/">Performers</a></li>
    <li class="level3 nav-leaf"><a href="../../../features/actors-and-performers/performers-with-physics/">Performers &amp; Physics</a></li>
    <li class="level2 nav-leaf"><a href="../../../features/context/">Context</a></li>
    <li class="level2 nav-node"><a href="../../../features/materials/">Materials</a></li>
    <li class="level3 nav-leaf"><a href="../../../features/materials/bitmap/">Bitmap material</a></li>
    <li class="level3 nav-leaf"><a href="../../../features/materials/filltypes/">Fill Types</a></li>
    <li class="level3 nav-leaf"><a href="../../../features/materials/imageeffects/">ImageEffects material</a></li>
    <li class="level2 nav-node"><a href="../../../features/physics/">Physics</a></li>
    <li class="level3 nav-leaf"><a href="../../../features/physics/basics/">Basic Physics Example</a></li>
    <li class="level2 nav-node"><a href="../../../features/primitives/">Primitives</a></li>
    <li class="level3 nav-leaf"><a href="../../../features/primitives/blank/">Blank Entity</a></li>
    <li class="level3 nav-leaf"><a href="../../../features/primitives/clip/">Clip</a></li>
    <li class="level3 nav-leaf"><a href="../../../features/primitives/graphic/">Graphic</a></li>
    <li class="level3 nav-leaf"><a href="../../../features/primitives/group/">Group</a></li>
    <li class="level3 nav-node"><a href="../../../features/primitives/shapes/">Shapes</a></li>
    <li class="level4 nav-leaf"><a href="../../../features/primitives/shapes/box/">Shape.Box</a></li>
    <li class="level4 nav-leaf"><a href="../../../features/primitives/shapes/circle/">Shape.Circle</a></li>
    <li class="level4 nav-leaf"><a href="../../../features/primitives/shapes/line/">Shape.Line</a></li>
    <li class="level4 nav-leaf"><a href="../../../features/primitives/shapes/polygon/">Shape.Polygon</a></li>
    <li class="level3 nav-leaf"><a href="../../../features/primitives/sprite/">Sprite</a></li>
    <li class="level3 nav-leaf"><a href="../../../features/primitives/text/">Text</a></li>
    <li class="level2 nav-node"><a href="../../../features/scenes/">Scenes</a></li>
    <li class="level3 nav-leaf"><a href="../../../features/scenes/minimal/">Minimal scene example</a></li>
    <li class="level2 nav-node"><a href="../../../features/shaders/">Shaders</a></li>
    <li class="level3 nav-leaf"><a href="../../../features/shaders/basic/">A basic custom shader</a></li>
    <li class="level2 nav-node"><a href="../../../features/time/">Time</a></li>
    <li class="level3 nav-leaf"><a href="../../../features/time/signals/">Signals &amp; Signal Functions</a></li>
    <li class="level3 nav-leaf"><a href="../../../features/time/time-varying-values/">Time Varying Values</a></li>
    <li class="level2 nav-node"><a href="../../../features/ui/">Ui</a></li>
    <li class="level3 nav-leaf"><a href="../../../features/ui/button/">UI Components: Button</a></li>
    <li class="level3 nav-leaf"><a href="../../../features/ui/component-group/">UI Components: Component Group</a></li>
    <li class="level3 nav-leaf"><a href="../../../features/ui/component-list/">UI Components: Component List</a></li>
    <li class="level3 nav-leaf"><a href="../../../features/ui/custom/">UI Components: Custom Components</a></li>
    <li class="level3 nav-leaf"><a href="../../../features/ui/hitarea/">UI Components: HitArea</a></li>
    <li class="level3 nav-leaf"><a href="../../../features/ui/input/">UI Components: Input</a></li>
    <li class="level3 nav-leaf"><a href="../../../features/ui/label/">UI Components: Label</a></li>
    <li class="level3 nav-leaf"><a href="../../../features/ui/maskedpane/">UI Components: Masked Pane</a></li>
    <li class="level3 nav-leaf"><a href="../../../features/ui/scrollpane/">UI Components: Scroll Pane</a></li>
    <li class="level3 nav-leaf"><a href="../../../features/ui/switch/">UI Components: Switch</a></li>
    <li class="level3 nav-leaf"><a href="../../../features/ui/textarea/">UI Components: TextArea</a></li>
    <li class="level3 nav-leaf"><a href="../../../features/ui/window/">UI Components: Windows</a></li>
  </ul>

</nav>

    <div id="container">

      
<nav id="page-nav">
  <p class="header"><a href="#">Part 3: Timeline Animations</a></p>

  <ul class="nav-list">
    <li class="level1 nav-leaf"><a href="#timeline-basics">Timeline basics</a></li>
    <li class="level1 nav-leaf"><a href="#animate-everything">Animate everything!</a></li>
    <li class="level1 nav-leaf"><a href="#example-links">Example Links</a></li>
    <li class="level1 nav-leaf"><a href="#how-to-make-a-timeline-animation">How to make a timeline animation</a></li>
    <li class="level1 nav-leaf"><a href="#summary">Summary</a></li>
  </ul>

  <p class="footer"></p>
</nav>


      <main class="content">

        <h1 id="part-3-timeline-animations" class="title">Part 3: Timeline Animations</h1>
        <p>In the previous part of the animations series, we looked at encoding our animations as signals and signal functions, and concluded by identifying the need for an even higher level of abstraction for when things get really complicated.</p>
        <p>Timelines allow you to describe complicated animations, with potentially many layers and things going on over time. They are essentially made up of <code>SignalFunction</code>s that are wrapped up in a nice DSL.</p>
        
        <h2 id="timeline-basics" class="section"><a class="anchor-link left" href="#timeline-basics"><i class="icofont-laika link">&#xef71;</i></a>Timeline basics</h2>
        <p>Each timeline can animate one type of thing, but they and their sub components are reusable and composable.</p>
        <p>Timeline animations are build up of &#39;layers&#39; (terminology clash alert: animation layers, not visible layers) which each animate one property. If you wanted to add another animated value then you would add another layer. The two layers would then be squashed together automatically to produce the end result.</p>
        <p>Timeline layers are each their own sequence of &#39;time slots&#39;, such as  <code>startAfter</code> and <code>animate</code>.  Time slots form a back-to-back chain of things to do. In the example below, there are two slots in use, but you can have as many as you like.</p>
        
        <h2 id="animate-everything" class="section"><a class="anchor-link left" href="#animate-everything"><i class="icofont-laika link">&#xef71;</i></a>Animate everything!</h2>
        <p>Timelines do now know that they are for &#39;animation&#39;, and can &#39;animate&#39; anything at all. We just need to change our idea of animation from something like &#39;moving a picture&#39; to &#39;producing a value over time following a series of transformations&#39;.</p>
        <p>For example, another interesting use of animations is to cross-fade music by animating the volume of two tracks.</p>
        
        <h2 id="example-links" class="section"><a class="anchor-link left" href="#example-links"><i class="icofont-laika link">&#xef71;</i></a>Example Links</h2>
        <ul>
          <li><a href="https://github.com/PurpleKingdomGames/indigo-docs/blob/main/guides/animation/part-3-timelines">View example code</a></li>
        </ul>
        <ul>
          <li><a href="https://purplekingdomgames.github.io/indigo-docs//live_demos/guides/animation/part-3-timelines/">Live demo</a></li>
        </ul>
        
        <h2 id="how-to-make-a-timeline-animation" class="section"><a class="anchor-link left" href="#how-to-make-a-timeline-animation"><i class="icofont-laika link">&#xef71;</i></a>How to make a timeline animation</h2>
        <p>In this animation, we have two layers.</p>
        <p>The first layer initially waits 2 seconds. Then over the next 5 seconds, it calculates a
        points position diagonally (lerp means linear interpolation) from one corner of the viewport
        to the other, and finally moves a circle to that position. All of this is performed using an
        &#39;ease-in-out&#39; function that accelerates the movement up initially and slows it down towards
        the end.</p>
        <p>The second layer also waits 2 seconds for consistency, then fades the circles fill color in,
        over time.</p>
        <p>The function inside the <code>animate</code> block is built up using <code>SignalFunction</code>s (see below) to
        describe the value transformation that results in the animated movement. There are lots of
        helpful signal functions available on the <code>SignalFunction</code> companion object for you to make
        use of.</p>
        <pre><code class="nohighlight"><span>  </span><span class="keyword">def</span><span> </span><span class="declaration-name">myTimelineAnimation</span><span>(</span><span class="identifier">viewportSize</span><span>: </span><span class="type-name">Size</span><span>): </span><span class="type-name">Timeline</span><span>[</span><span class="type-name">Shape</span><span>.</span><span class="type-name">Circle</span><span>] =
    </span><span class="identifier">timeline</span><span>(
      </span><span class="identifier">layer</span><span>(
        </span><span class="identifier">startAfter</span><span>(</span><span class="number-literal">2</span><span>.</span><span class="identifier">seconds</span><span>),
        </span><span class="identifier">animate</span><span>(</span><span class="number-literal">10</span><span>.</span><span class="identifier">seconds</span><span>) { </span><span class="identifier">circle</span><span> =&gt;
          </span><span class="identifier">easeInOut</span><span> &gt;&gt;&gt;
            </span><span class="identifier">lerp</span><span>(</span><span class="type-name">Point</span><span>(</span><span class="number-literal">60</span><span>), </span><span class="identifier">viewportSize</span><span>.</span><span class="identifier">toPoint</span><span> - </span><span class="type-name">Point</span><span>(</span><span class="number-literal">60</span><span>)) &gt;&gt;&gt;
            </span><span class="type-name">SignalFunction</span><span>(</span><span class="identifier">pt</span><span> =&gt; </span><span class="identifier">circle</span><span>.</span><span class="identifier">moveTo</span><span>(</span><span class="identifier">pt</span><span>))
        }
      ),
      </span><span class="identifier">layer</span><span>(
        </span><span class="identifier">startAfter</span><span>(</span><span class="number-literal">2</span><span>.</span><span class="identifier">seconds</span><span>),
        </span><span class="identifier">animate</span><span>(</span><span class="number-literal">10</span><span>.</span><span class="identifier">seconds</span><span>) { </span><span class="identifier">circle</span><span> =&gt;
          </span><span class="identifier">lerp</span><span> &gt;&gt;&gt;
            </span><span class="type-name">SignalFunction</span><span> { </span><span class="identifier">alpha</span><span> =&gt;
              </span><span class="identifier">circle</span><span>.</span><span class="identifier">withFill</span><span>(</span><span class="type-name">Fill</span><span>.</span><span class="type-name">Color</span><span>(</span><span class="type-name">RGBA</span><span>.</span><span class="type-name">Green</span><span>.</span><span class="identifier">withAlpha</span><span>(</span><span class="identifier">alpha</span><span>)))
            }
        }
      )
    )

  </span><span class="keyword">def</span><span> </span><span class="declaration-name">present</span><span>(</span><span class="identifier">context</span><span>: </span><span class="type-name">Context</span><span>[</span><span class="type-name">Unit</span><span>], </span><span class="identifier">model</span><span>: </span><span class="type-name">Unit</span><span>): </span><span class="type-name">Outcome</span><span>[</span><span class="type-name">SceneUpdateFragment</span><span>] =
    </span><span class="type-name">Outcome</span><span>(
      </span><span class="type-name">SceneUpdateFragment</span><span>(
        </span><span class="identifier">myTimelineAnimation</span><span>(</span><span class="identifier">context</span><span>.</span><span class="identifier">frame</span><span>.</span><span class="identifier">viewport</span><span>.</span><span class="identifier">bounds</span><span>.</span><span class="identifier">size</span><span>)
          .</span><span class="identifier">atOrLast</span><span>(</span><span class="identifier">context</span><span>.</span><span class="identifier">frame</span><span>.</span><span class="identifier">time</span><span>.</span><span class="identifier">running</span><span>)(</span><span class="identifier">circle</span><span>)
          .</span><span class="identifier">toBatch</span><span>
      )
    )</span></code></pre>
        
        <h2 id="summary" class="section"><a class="anchor-link left" href="#summary"><i class="icofont-laika link">&#xef71;</i></a>Summary</h2>
        <p>Designed to ease the production of coordinated animations for menu and game over screens,
        timelines provide a powerful abstraction over signals and signal functions, to allow you to
        describe complicated animations and state transitions, with many moving parts.</p>
        <p>Of course, all of this abstraction comes at a cost, namely: Allocations. While Timeline
        animations are great for a few complicated situations, they are not well suited to cases where
        you need many instances of small animations. For those, signals, imported animations and even
        handrolled animation code can offer a better performance vs ease of use trade off.</p>
        <p>...but what is the lightest, fastest, most performant animation technique of all?</p>
        <p>In part 4 we&#39;ll answer that question by diving into shaders!</p>

        
<hr class="footer-rule"/>
<footer>
  Site generated by <a href="https://typelevel.org/Laika/">Laika</a> with the Helium theme.
</footer>


      </main>

    </div>

  </body>

</html>