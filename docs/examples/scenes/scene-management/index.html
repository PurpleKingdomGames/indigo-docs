<!DOCTYPE html>
<html lang="en">
  
  <head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="generator" content="Typelevel Laika + Helium Theme" />
  <title>Scene Management</title>
  
  
  <meta name="description" content="An FP game engine for Scala."/>
  
  
  
  <link rel="icon" sizes="32x32" type="image/png" href="../../../img/favicon.png"/>
  
  
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lato:400,700">
  
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Fira+Mono:500">
  
  <link rel="stylesheet" type="text/css" href="../../../helium/site/icofont.min.css" />
    <link rel="stylesheet" type="text/css" href="../../../helium/site/laika-helium.css" />
    <link rel="stylesheet" type="text/css" href="../../../css/custom.css" />
  <script src="../../../helium/site/laika-helium.js"></script>
  
  
  <script> /* for avoiding page load transitions */ </script>
</head>

  <body>

    <header id="top-bar" class="light-default dark-default">

  <div class="row">
    <a id="nav-icon">
      <i class="icofont-laika navigationMenu" title="Navigation">&#xefa2;</i>
    </a>
    
    
  </div>

  <a class="image-link" href="../../../documentation/"><img src="../../../img/indigo_logo_solid_text.svg" alt="An FP game engine for Scala." title="Indigo" width="150" height="50"></a>

  <div class="row links">
    
    <a class="button-link" href="https://purplekingdomgames.github.io/indigo-docs/demos">Live Demos</a>
    
    <a class="button-link" href="https://discord.gg/b5CD47g">Discord</a>
    
    <a class="button-link" href="https://github.com/PurpleKingdomGames/indigo">Github</a>
    
  </div>  

</header>
    
    <nav id="sidebar">

  <div class="row">
    
    <a class="button-link" href="https://purplekingdomgames.github.io/indigo-docs/demos">Live Demos</a>
    
    <a class="button-link" href="https://discord.gg/b5CD47g">Discord</a>
    
    <a class="button-link" href="https://github.com/PurpleKingdomGames/indigo">Github</a>
    
  </div>

  <ul class="nav-list">
    <li class="level1 nav-node"><a href="../../../documentation/">Indigo</a></li>
    <li class="level2 nav-header">Indigo</li>
    <li class="level3 nav-leaf"><a href="../../../documentation/key-concepts/making-games-testable.html">Making games testable</a></li>
    <li class="level3 nav-leaf"><a href="../../../documentation/key-concepts/model-viewmodel-view.html">Model, ViewModel, &amp; View</a></li>
    <li class="level3 nav-leaf"><a href="../../../documentation/key-concepts/performance.html">Performance</a></li>
    <li class="level2 nav-header">General information</li>
    <li class="level3 nav-leaf"><a href="../../../documentation/misc/motivation-and-constraints.html">Motivation &amp; Constraints</a></li>
    <li class="level3 nav-leaf"><a href="../../../documentation/misc/prior-art.html">Prior Art</a></li>
    <li class="level3 nav-leaf"><a href="../../../documentation/misc/rendering-technology.html">Rendering Technology</a></li>
    <li class="level2 nav-header">Quick start</li>
    <li class="level3 nav-leaf"><a href="../../../documentation/quickstart/examples.html">Examples, Demos, and References</a></li>
    <li class="level3 nav-leaf"><a href="../../../documentation/quickstart/extensions-and-libs.html">Extensions, Libraries, and Related Projects</a></li>
    <li class="level3 nav-leaf"><a href="../../../documentation/quickstart/quickstart.html">Quick start</a></li>
    <li class="level1 nav-node"><a href="../../">Examples</a></li>
    <li class="level2 nav-node"><a href="../../importers/">Importers</a></li>
    <li class="level3 nav-leaf"><a href="../../importers/tiled-loaded/">Loading Tiled maps at runtime</a></li>
    <li class="level2 nav-node"><a href="../../materials/">Materials</a></li>
    <li class="level3 nav-leaf"><a href="../../materials/bitmap/">Bitmap material</a></li>
    <li class="level3 nav-leaf"><a href="../../materials/filltypes/">Fill Types</a></li>
    <li class="level3 nav-leaf"><a href="../../materials/imageeffects/">ImageEffects material</a></li>
    <li class="level2 nav-node"><a href="../../physics/">Physics</a></li>
    <li class="level3 nav-leaf"><a href="../../physics/basics/">Basic Physics Example</a></li>
    <li class="level2 nav-node"><a href="../../primitives/">Primitives</a></li>
    <li class="level3 nav-leaf"><a href="../../primitives/graphic/">Graphic</a></li>
    <li class="level3 nav-leaf"><a href="../../primitives/text/">Text</a></li>
    <li class="level2 nav-node"><a href="../">Scenes</a></li>
    <li class="level3 active nav-leaf"><a href="#">Scene Management</a></li>
    <li class="level2 nav-node"><a href="../../shaders/">Shaders</a></li>
    <li class="level3 nav-leaf"><a href="../../shaders/basic/">A basic custom shader</a></li>
    <li class="level2 nav-node"><a href="../../ui/">Ui</a></li>
    <li class="level3 nav-leaf"><a href="../../ui/button/">UI Components: Button</a></li>
    <li class="level3 nav-leaf"><a href="../../ui/component-group/">UI Components: Component Group</a></li>
    <li class="level3 nav-leaf"><a href="../../ui/component-list/">UI Components: Component List</a></li>
    <li class="level3 nav-leaf"><a href="../../ui/custom/">UI Components: Custom Components</a></li>
    <li class="level3 nav-leaf"><a href="../../ui/hitarea/">UI Components: HitArea</a></li>
    <li class="level3 nav-leaf"><a href="../../ui/input/">UI Components: Input</a></li>
    <li class="level3 nav-leaf"><a href="../../ui/label/">UI Components: Label</a></li>
    <li class="level3 nav-leaf"><a href="../../ui/maskedpane/">UI Components: Masked Pane</a></li>
    <li class="level3 nav-leaf"><a href="../../ui/radiobuttons/">UI Components: Radio buttons</a></li>
    <li class="level3 nav-leaf"><a href="../../ui/scrollpane/">UI Components: Scroll Pane</a></li>
    <li class="level3 nav-leaf"><a href="../../ui/switch/">UI Components: Switch</a></li>
    <li class="level3 nav-leaf"><a href="../../ui/textarea/">UI Components: TextArea</a></li>
    <li class="level3 nav-leaf"><a href="../../ui/window/">UI Components: Windows</a></li>
  </ul>

</nav>

    <div id="container">

      
<nav id="page-nav">
  <p class="header"><a href="#">Scene Management</a></p>

  <ul class="nav-list">
    <li class="level1 nav-leaf"><a href="#example-links">Example Links</a></li>
    <li class="level1 nav-leaf"><a href="#how-to-manage-game-scenes">How to manage game scenes</a></li>
  </ul>

  <p class="footer"></p>
</nav>


      <main class="content">

        <h1 id="scene-management" class="title">Scene Management</h1>
        <p>Scene&#39;s are a really handy way to organise your game into distinct &#39;scenes&#39; or &#39;screens&#39;, such as a menu screen or a loading screen or the main game scene. The benefit is that, although they do not stop you from having full access to everything, they allow you to minify and encapsulate each screens functionality and data to keep it small and easy to reason about.</p>
        
        <h2 id="example-links" class="section"><a class="anchor-link left" href="#example-links"><i class="icofont-laika link">&#xef71;</i></a>Example Links</h2>
        <ul>
          <li><a href="https://github.com/PurpleKingdomGames/indigo-docs/blob/main/examples/scenes/scene-management">View example code</a></li>
        </ul>
        <ul>
          <li><a href="https://purplekingdomgames.github.io/indigo-docs//demos/examples/scenes/scene-management/">Live demo</a></li>
        </ul>
        
        <h2 id="how-to-manage-game-scenes" class="section"><a class="anchor-link left" href="#how-to-manage-game-scenes"><i class="icofont-laika link">&#xef71;</i></a>How to manage game scenes</h2>
        <p>In this example we&#39;ll set up a simple game with two scenes, where clicking anywhere moves from
        one scene to the next.</p>
        <p>Scene&#39;s can either use the main game model and view model, or they can have their own. Custom
        models are made up of data stored in the main models. In this case, we&#39;ll define a simple model
        for each.</p>
        <pre class="keep-together pdf epub"><code class="nohighlight"><span class="keyword">final</span><span> </span><span class="keyword">case</span><span> </span><span class="keyword">class</span><span> </span><span class="type-name">SceneModelA</span><span>(</span><span class="identifier">value</span><span>: </span><span class="type-name">String</span><span>)
</span><span class="keyword">final</span><span> </span><span class="keyword">case</span><span> </span><span class="keyword">class</span><span> </span><span class="type-name">SceneModelB</span><span>(</span><span class="identifier">value</span><span>: </span><span class="type-name">String</span><span>)</span></code></pre>
        <p>Scenes are simple objects then extend the Scene type.</p>
        <p>Scenes are another instance of the TEA patterm themselves follow a very pattern to the main game
        functions, defining their own <code>updateModel</code>, <code>updateViewModel</code>, and <code>present</code> and so on.</p>
        <pre class="keep-together pdf epub"><code class="nohighlight"><span class="keyword">object</span><span> </span><span class="type-name">SceneA</span><span> </span><span class="keyword">extends</span><span> </span><span class="type-name">Scene</span><span>[</span><span class="type-name">StartUpData</span><span>, </span><span class="type-name">Model</span><span>, </span><span class="type-name">ViewModel</span><span>]:</span></code></pre>
        <p>The way that scene&#39;s get their own models and view models is via &#39;lenses&#39;.</p>
        <p>First We tell the scene what the type of it&#39;s own model and view models are. We then define
        lenses that tell the scene how to &#39;get&#39; and &#39;set&#39; those models from the main game models.</p>
        <p>Scene models can be a piece of data that lives in a field on the main model, as in this
        example. They can also be ephemeral data types aggregated from various main model data points
        and pulled together each frame, as needed.</p>
        <pre class="keep-together pdf epub"><code class="nohighlight"><span>  </span><span class="keyword">type</span><span> </span><span class="type-name">SceneModel</span><span>     = </span><span class="type-name">SceneModelA</span><span>
  </span><span class="keyword">type</span><span> </span><span class="type-name">SceneViewModel</span><span> = </span><span class="type-name">ViewModel</span><span>

  </span><span class="keyword">val</span><span> </span><span class="identifier">modelLens</span><span>: </span><span class="type-name">Lens</span><span>[</span><span class="type-name">Model</span><span>, </span><span class="type-name">SceneModelA</span><span>] =
    </span><span class="type-name">Lens</span><span>(
      </span><span class="identifier">model</span><span> =&gt; </span><span class="identifier">model</span><span>.</span><span class="identifier">sceneA</span><span>,
      (</span><span class="identifier">model</span><span>, </span><span class="identifier">newMessage</span><span>) =&gt; </span><span class="identifier">model</span><span>.</span><span class="identifier">copy</span><span>(</span><span class="identifier">sceneA</span><span> = </span><span class="identifier">newMessage</span><span>)
    )

  </span><span class="keyword">val</span><span> </span><span class="identifier">viewModelLens</span><span>: </span><span class="type-name">Lens</span><span>[</span><span class="type-name">ViewModel</span><span>, </span><span class="type-name">ViewModel</span><span>] =
    </span><span class="type-name">Lens</span><span>.</span><span class="identifier">keepLatest</span></code></pre>
        <p>There are a number of <code>SceneEvent</code>s that you can experiment with, here we listen to the
        <code>SceneChange</code> event and use the <code>JumpTo</code> event to go to the scene we want, but there are
        others such as <code>Next</code> and <code>Previous</code> to explore.</p>
        <pre><code class="nohighlight"><span>  </span><span class="keyword">def</span><span> </span><span class="declaration-name">updateModel</span><span>(
      </span><span class="identifier">context</span><span>: </span><span class="type-name">SceneContext</span><span>[</span><span class="type-name">StartUpData</span><span>],
      </span><span class="identifier">sceneModel</span><span>: </span><span class="type-name">SceneModelA</span><span>
  ): </span><span class="type-name">GlobalEvent</span><span> =&gt; </span><span class="type-name">Outcome</span><span>[</span><span class="type-name">SceneModelA</span><span>] =
    </span><span class="keyword">case</span><span> </span><span class="type-name">SceneEvent</span><span>.</span><span class="type-name">SceneChange</span><span>(</span><span class="identifier">from</span><span>, </span><span class="identifier">to</span><span>, </span><span class="identifier">at</span><span>) =&gt;
      </span><span class="identifier">println</span><span>(</span><span class="string-literal">s&quot;A: Changed scene from &#39;</span><span class="substitution">${from}</span><span class="string-literal">&#39; to &#39;</span><span class="substitution">${to}</span><span class="string-literal">&#39; at running time: </span><span class="substitution">${at}</span><span class="string-literal">&quot;</span><span>)
      </span><span class="type-name">Outcome</span><span>(</span><span class="identifier">sceneModel</span><span>)

    </span><span class="keyword">case</span><span> </span><span class="type-name">MouseEvent</span><span>.</span><span class="type-name">Click</span><span>(</span><span class="identifier">_</span><span>) =&gt;
      </span><span class="type-name">Outcome</span><span>(</span><span class="identifier">sceneModel</span><span>)
        .</span><span class="identifier">addGlobalEvents</span><span>(</span><span class="type-name">SceneEvent</span><span>.</span><span class="type-name">JumpTo</span><span>(</span><span class="type-name">SceneB</span><span>.</span><span class="identifier">name</span><span>))

    </span><span class="keyword">case</span><span> </span><span class="identifier">_</span><span> =&gt;
      </span><span class="type-name">Outcome</span><span>(</span><span class="identifier">sceneModel</span><span>)</span></code></pre>
        <p>The main game functions of an <code>IndigoGame</code> entry point are largely the same as you&#39;d find in an
        <code>IndigoGame</code>, but there are two things to note:</p>
        <ol class="arabic">
          <li>New methods called <code>scenes</code> and <code>initialScene</code> are declared. Scene&#39;s must be declared in
          order in the scenes <code>NonEmptyList</code>, and there must be at least one scene. The initial scene
          is optional, if <code>None</code> then the first scene loaded will be the first one in the scene&#39;s
          list.</li>
          <li>The usual functions like <code>updateModel</code> are declared as normal, but you can now thing of
          them as &#39;global&#39; functions. The scene&#39;s implementation of <code>updateModel</code> will only be called
          when that scene is running, but <code>updateModel</code> in the main game runs all the time. This is
          helpful for dealing with any events that are not specific to any one scene, or presenting
          graphics that should appear all the time.</li>
        </ol>
        <pre class="keep-together pdf epub"><code class="nohighlight"><span>  </span><span class="keyword">def</span><span> </span><span class="declaration-name">scenes</span><span>(</span><span class="identifier">bootData</span><span>: </span><span class="type-name">BootData</span><span>): </span><span class="type-name">NonEmptyList</span><span>[</span><span class="type-name">Scene</span><span>[</span><span class="type-name">StartUpData</span><span>, </span><span class="type-name">Model</span><span>, </span><span class="type-name">ViewModel</span><span>]] =
    </span><span class="type-name">NonEmptyList</span><span>(</span><span class="type-name">SceneA</span><span>, </span><span class="type-name">SceneB</span><span>)

  </span><span class="keyword">def</span><span> </span><span class="declaration-name">initialScene</span><span>(</span><span class="identifier">bootData</span><span>: </span><span class="type-name">BootData</span><span>): </span><span class="type-name">Option</span><span>[</span><span class="type-name">SceneName</span><span>] = </span><span class="type-name">Option</span><span>(</span><span class="type-name">SceneA</span><span>.</span><span class="identifier">name</span><span>)</span></code></pre>
        <pre class="keep-together pdf epub"><code class="nohighlight"><span class="keyword">def</span><span> </span><span class="declaration-name">updateModel</span><span>(</span><span class="identifier">context</span><span>: </span><span class="type-name">Context</span><span>[</span><span class="type-name">StartUpData</span><span>], </span><span class="identifier">model</span><span>: </span><span class="type-name">Model</span><span>): </span><span class="type-name">GlobalEvent</span><span> =&gt; </span><span class="type-name">Outcome</span><span>[</span><span class="type-name">Model</span><span>] =
  </span><span class="keyword">case</span><span> </span><span class="identifier">_</span><span> =&gt; </span><span class="type-name">Outcome</span><span>(</span><span class="identifier">model</span><span>)</span></code></pre>

        
<hr class="footer-rule"/>
<footer>
  Site generated by <a href="https://typelevel.org/Laika/">Laika</a> with the Helium theme.
</footer>


      </main>

    </div>

  </body>

</html>