<!DOCTYPE html>
<html lang="en">
  
  <head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="generator" content="Typelevel Laika + Helium Theme" />
  <title>UI Components: Component List</title>
  
  
  <meta name="description" content="An FP game engine for Scala."/>
  
  
  
  <link rel="icon" sizes="32x32" type="image/png" href="../../../img/favicon.png"/>
  
  
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lato:400,700">
  
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Fira+Mono:500">
  
  <link rel="stylesheet" type="text/css" href="../../../helium/site/icofont.min.css" />
    <link rel="stylesheet" type="text/css" href="../../../helium/site/laika-helium.css" />
    <link rel="stylesheet" type="text/css" href="../../../css/custom.css" />
  <script src="../../../helium/site/laika-helium.js"></script>
  
  
  <script> /* for avoiding page load transitions */ </script>
</head>

  <body>

    <header id="top-bar" class="light-default dark-default">

  <div class="row">
    <a id="nav-icon">
      <i class="icofont-laika navigationMenu" title="Navigation">&#xefa2;</i>
    </a>
    
    
  </div>

  <a class="image-link" href="../../../documentation/"><img src="../../../img/indigo_logo_solid_text.svg" alt="An FP game engine for Scala." title="Indigo" width="150" height="50"></a>

  <div class="row links">
    
    <a class="button-link" href="https://purplekingdomgames.github.io/indigo-docs/demos">Live Demos</a>
    
    <a class="button-link" href="https://discord.gg/b5CD47g">Discord</a>
    
    <a class="button-link" href="https://github.com/PurpleKingdomGames/indigo">Github</a>
    
  </div>  

</header>
    
    <nav id="sidebar">

  <div class="row">
    
    <a class="button-link" href="https://purplekingdomgames.github.io/indigo-docs/demos">Live Demos</a>
    
    <a class="button-link" href="https://discord.gg/b5CD47g">Discord</a>
    
    <a class="button-link" href="https://github.com/PurpleKingdomGames/indigo">Github</a>
    
  </div>

  <ul class="nav-list">
    <li class="level1 nav-node"><a href="../../../documentation/">Indigo</a></li>
    <li class="level2 nav-header">Indigo</li>
    <li class="level3 nav-leaf"><a href="../../../documentation/key-concepts/making-games-testable.html">Making games testable</a></li>
    <li class="level3 nav-leaf"><a href="../../../documentation/key-concepts/model-viewmodel-view.html">Model, ViewModel, &amp; View</a></li>
    <li class="level3 nav-leaf"><a href="../../../documentation/key-concepts/performance.html">Performance</a></li>
    <li class="level2 nav-header">General information</li>
    <li class="level3 nav-leaf"><a href="../../../documentation/misc/motivation-and-constraints.html">Motivation &amp; Constraints</a></li>
    <li class="level3 nav-leaf"><a href="../../../documentation/misc/prior-art.html">Prior Art</a></li>
    <li class="level3 nav-leaf"><a href="../../../documentation/misc/rendering-technology.html">Rendering Technology</a></li>
    <li class="level2 nav-header">Quick start</li>
    <li class="level3 nav-leaf"><a href="../../../documentation/quickstart/examples.html">Examples, Demos, and References</a></li>
    <li class="level3 nav-leaf"><a href="../../../documentation/quickstart/extensions-and-libs.html">Extensions, Libraries, and Related Projects</a></li>
    <li class="level3 nav-leaf"><a href="../../../documentation/quickstart/quickstart.html">Quick start</a></li>
    <li class="level2 nav-header">Shaders</li>
    <li class="level3 nav-leaf"><a href="../../../documentation/shaders/shaders.html">Shaders</a></li>
    <li class="level1 nav-node"><a href="../../">Examples</a></li>
    <li class="level2 nav-node"><a href="../../actors-and-performers/">Actors-and-performers</a></li>
    <li class="level3 nav-leaf"><a href="../../actors-and-performers/actors/">Actors</a></li>
    <li class="level3 nav-leaf"><a href="../../actors-and-performers/actors-with-physics/">Actors &amp; Physics</a></li>
    <li class="level3 nav-leaf"><a href="../../actors-and-performers/performers/">Performers</a></li>
    <li class="level3 nav-leaf"><a href="../../actors-and-performers/performers-with-physics/">Performers &amp; Physics</a></li>
    <li class="level2 nav-node"><a href="../../importers/">Importers</a></li>
    <li class="level3 nav-leaf"><a href="../../importers/tiled-loaded/">Loading Tiled maps at runtime</a></li>
    <li class="level2 nav-node"><a href="../../materials/">Materials</a></li>
    <li class="level3 nav-leaf"><a href="../../materials/bitmap/">Bitmap material</a></li>
    <li class="level3 nav-leaf"><a href="../../materials/filltypes/">Fill Types</a></li>
    <li class="level3 nav-leaf"><a href="../../materials/imageeffects/">ImageEffects material</a></li>
    <li class="level2 nav-node"><a href="../../physics/">Physics</a></li>
    <li class="level3 nav-leaf"><a href="../../physics/basics/">Basic Physics Example</a></li>
    <li class="level2 nav-node"><a href="../../primitives/">Primitives</a></li>
    <li class="level3 nav-leaf"><a href="../../primitives/graphic/">Graphic</a></li>
    <li class="level3 nav-leaf"><a href="../../primitives/text/">Text</a></li>
    <li class="level2 nav-node"><a href="../../scenes/">Scenes</a></li>
    <li class="level3 nav-leaf"><a href="../../scenes/minimal/">Minimal Scene&#39;s example</a></li>
    <li class="level3 nav-leaf"><a href="../../scenes/scene-management/">Scene Management</a></li>
    <li class="level2 nav-node"><a href="../../shaders/">Shaders</a></li>
    <li class="level3 nav-leaf"><a href="../../shaders/basic/">A basic custom shader</a></li>
    <li class="level2 nav-node"><a href="../">Ui</a></li>
    <li class="level3 nav-leaf"><a href="../button/">UI Components: Button</a></li>
    <li class="level3 nav-leaf"><a href="../component-group/">UI Components: Component Group</a></li>
    <li class="level3 active nav-leaf"><a href="#">UI Components: Component List</a></li>
    <li class="level3 nav-leaf"><a href="../custom/">UI Components: Custom Components</a></li>
    <li class="level3 nav-leaf"><a href="../hitarea/">UI Components: HitArea</a></li>
    <li class="level3 nav-leaf"><a href="../input/">UI Components: Input</a></li>
    <li class="level3 nav-leaf"><a href="../label/">UI Components: Label</a></li>
    <li class="level3 nav-leaf"><a href="../maskedpane/">UI Components: Masked Pane</a></li>
    <li class="level3 nav-leaf"><a href="../radiobuttons/">UI Components: Radio buttons</a></li>
    <li class="level3 nav-leaf"><a href="../scrollpane/">UI Components: Scroll Pane</a></li>
    <li class="level3 nav-leaf"><a href="../switch/">UI Components: Switch</a></li>
    <li class="level3 nav-leaf"><a href="../textarea/">UI Components: TextArea</a></li>
    <li class="level3 nav-leaf"><a href="../window/">UI Components: Windows</a></li>
  </ul>

</nav>

    <div id="container">

      
<nav id="page-nav">
  <p class="header"><a href="#">UI Components: Component List</a></p>

  <ul class="nav-list">
    <li class="level1 nav-leaf"><a href="#example-links">Example Links</a></li>
    <li class="level1 nav-node"><a href="#how-to-set-up-a-component-list">How to set up a component list</a></li>
    <li class="level2 nav-leaf"><a href="#imports">Imports</a></li>
    <li class="level2 nav-leaf"><a href="#defining-our-component-list">Defining our component list</a></li>
    <li class="level2 nav-leaf"><a href="#setting-up-the-model">Setting up the Model</a></li>
    <li class="level2 nav-leaf"><a href="#updating-the-model">Updating the Model</a></li>
    <li class="level2 nav-leaf"><a href="#presenting-the-component-list">Presenting the component list</a></li>
  </ul>

  <p class="footer"></p>
</nav>


      <main class="content">

        <h1 id="ui-components-component-list" class="title">UI Components: Component List</h1>
        <p>Component groups and component lists are containers for other components. The difference between the two is that a component group is a known collection of components that can be dynamically sized; while a component list is a dynamic collection of components with more limited layout options.</p>
        <p>Using component groups and lists, component UI system provides out of the box functionality for standard requirements like re-flowing / responsively positioned UI elements. Indigo&#39;s UI system is <em>not</em> as clever as using something like HTML, but should satisfy many common use cases.</p>
        
        <h2 id="example-links" class="section"><a class="anchor-link left" href="#example-links"><i class="icofont-laika link">&#xef71;</i></a>Example Links</h2>
        <ul>
          <li><a href="https://github.com/PurpleKingdomGames/indigo-docs/blob/main/examples/ui/component-list">View example code</a></li>
        </ul>
        <ul>
          <li><a href="https://purplekingdomgames.github.io/indigo-docs//demos/examples/ui/component-list/">Live demo</a></li>
        </ul>
        
        <h2 id="how-to-set-up-a-component-list" class="section"><a class="anchor-link left" href="#how-to-set-up-a-component-list"><i class="icofont-laika link">&#xef71;</i></a>How to set up a component list</h2>
        
        <h3 id="imports" class="section"><a class="anchor-link left" href="#imports"><i class="icofont-laika link">&#xef71;</i></a>Imports</h3>
        <p>Before we do anything else, we&#39;ll need some additional imports:</p>
        <pre class="keep-together pdf epub"><code class="nohighlight"><span class="keyword">import</span><span> </span><span class="identifier">indigoextras</span><span>.</span><span class="identifier">ui</span><span>.*
</span><span class="keyword">import</span><span> </span><span class="identifier">indigoextras</span><span>.</span><span class="identifier">ui</span><span>.</span><span class="identifier">syntax</span><span>.*</span></code></pre>
        
        <h3 id="defining-our-component-list" class="section"><a class="anchor-link left" href="#defining-our-component-list"><i class="icofont-laika link">&#xef71;</i></a>Defining our component list</h3>
        <p>We&#39;re going to set up a component list of labels. It isn&#39;t necessary, but in this example our
        list will have a dynamic number of elements based on a value in the game&#39;s model, passed across
        as reference data in the <code>UIContext</code>.</p>
        <p>This dynamic layout ability is something <code>ComponentGroup</code> cannot do, but reduces the available
        layout options. So you need to choice the right component type for your needs.</p>
        <pre><code class="nohighlight"><span class="keyword">object</span><span> </span><span class="type-name">CustomComponents</span><span>:

  </span><span class="keyword">val</span><span> </span><span class="identifier">text</span><span> =
    </span><span class="type-name">Text</span><span>(
      </span><span class="string-literal">&quot;&quot;</span><span>,
      </span><span class="type-name">DefaultFont</span><span>.</span><span class="identifier">fontKey</span><span>,
      </span><span class="type-name">Assets</span><span>.</span><span class="identifier">assets</span><span>.</span><span class="identifier">generated</span><span>.</span><span class="type-name">DefaultFontMaterial</span><span>
    )

  </span><span class="keyword">val</span><span> </span><span class="identifier">listOfLabels</span><span>: </span><span class="type-name">ComponentList</span><span>[</span><span class="type-name">Int</span><span>] =
    </span><span class="type-name">ComponentList</span><span>(</span><span class="type-name">Dimensions</span><span>(</span><span class="number-literal">200</span><span>, </span><span class="number-literal">80</span><span>)) { (</span><span class="identifier">ctx</span><span>: </span><span class="type-name">UIContext</span><span>[</span><span class="type-name">Int</span><span>]) =&gt;
      (</span><span class="number-literal">1</span><span> </span><span class="identifier">to</span><span> </span><span class="identifier">ctx</span><span>.</span><span class="identifier">reference</span><span>).</span><span class="identifier">toBatch</span><span>.</span><span class="identifier">map</span><span> { </span><span class="identifier">i</span><span> =&gt;
        </span><span class="type-name">ComponentId</span><span>(</span><span class="string-literal">&quot;lbl&quot;</span><span> + </span><span class="identifier">i</span><span>) -&gt; </span><span class="type-name">Label</span><span>[</span><span class="type-name">Int</span><span>](
          </span><span class="string-literal">&quot;Custom label &quot;</span><span> + </span><span class="identifier">i</span><span>,
          (</span><span class="identifier">_</span><span>, </span><span class="identifier">label</span><span>) =&gt; </span><span class="type-name">Bounds</span><span>(</span><span class="number-literal">0</span><span>, </span><span class="number-literal">0</span><span>, </span><span class="number-literal">250</span><span>, </span><span class="number-literal">20</span><span>)
        ) { </span><span class="keyword">case</span><span> (</span><span class="identifier">ctx</span><span>, </span><span class="identifier">label</span><span>) =&gt;
          </span><span class="type-name">Outcome</span><span>(
            </span><span class="type-name">Layer</span><span>(
              </span><span class="identifier">text</span><span>
                .</span><span class="identifier">withText</span><span>(</span><span class="identifier">label</span><span>.</span><span class="identifier">text</span><span>(</span><span class="identifier">ctx</span><span>))
                .</span><span class="identifier">moveTo</span><span>(</span><span class="identifier">ctx</span><span>.</span><span class="identifier">parent</span><span>.</span><span class="identifier">coords</span><span>.</span><span class="identifier">unsafeToPoint</span><span>)
            )
          )
        }
      }
    }
      .</span><span class="identifier">withLayout</span><span>(</span><span class="type-name">ComponentLayout</span><span>.</span><span class="type-name">Vertical</span><span>(</span><span class="type-name">Padding</span><span>(</span><span class="number-literal">10</span><span>)))</span></code></pre>
        
        <h3 id="setting-up-the-model" class="section"><a class="anchor-link left" href="#setting-up-the-model"><i class="icofont-laika link">&#xef71;</i></a>Setting up the Model</h3>
        <p>The model contains the component list. Component lists define collections of components, and how
        they should be laid out. They have various options that affect their layout behaviour.</p>
        <p>Here we initialise our model with the component list.</p>
        <pre class="keep-together pdf epub"><code class="nohighlight"><span class="keyword">final</span><span> </span><span class="keyword">case</span><span> </span><span class="keyword">class</span><span> </span><span class="type-name">Model</span><span>(</span><span class="identifier">numOfLabels</span><span>: </span><span class="type-name">Int</span><span>, </span><span class="identifier">components</span><span>: </span><span class="type-name">ComponentList</span><span>[</span><span class="type-name">Int</span><span>])
</span><span class="keyword">object</span><span> </span><span class="type-name">Model</span><span>:

  </span><span class="keyword">val</span><span> </span><span class="identifier">initial</span><span>: </span><span class="type-name">Model</span><span> =
    </span><span class="type-name">Model</span><span>(</span><span class="number-literal">4</span><span>, </span><span class="type-name">CustomComponents</span><span>.</span><span class="identifier">listOfLabels</span><span>)</span></code></pre>
        
        <h3 id="updating-the-model" class="section"><a class="anchor-link left" href="#updating-the-model"><i class="icofont-laika link">&#xef71;</i></a>Updating the Model</h3>
        <p>One thing to note is that we need to construct a <code>UIContext</code> to pass to the component group.
        This is important, if a little cumbersome.</p>
        <p>The <code>UIContext</code> holds any custom reference data we might like to propagate down through the
        component hierarchy, but also information about the grid size the UI is operating on (normally
        1x1, this feature is really for use cases like ASCII / terminal UIs) and the magnification of
        the UI.</p>
        <p>The <code>UIContext</code> also provides the top level position of the component hierarchy, so to move
        the group and so the button to a new position, we need to tell the <code>UIContext</code> to move the
        bounds by the desired amount using <code>moveParentBy</code>.</p>
        <p>In this example we need to update the context with the model value, and supply it along with
        the event to the component list&#39;s update method.</p>
        <pre class="keep-together pdf epub"><code class="nohighlight"><span>  </span><span class="keyword">def</span><span> </span><span class="declaration-name">updateModel</span><span>(</span><span class="identifier">context</span><span>: </span><span class="type-name">Context</span><span>[</span><span class="type-name">Unit</span><span>], </span><span class="identifier">model</span><span>: </span><span class="type-name">Model</span><span>): </span><span class="type-name">GlobalEvent</span><span> =&gt; </span><span class="type-name">Outcome</span><span>[</span><span class="type-name">Model</span><span>] =
    </span><span class="keyword">case</span><span> </span><span class="identifier">e</span><span> =&gt;
      </span><span class="keyword">val</span><span> </span><span class="identifier">ctx</span><span> = </span><span class="type-name">UIContext</span><span>(</span><span class="identifier">context</span><span>, </span><span class="number-literal">1</span><span>)
        .</span><span class="identifier">moveParentBy</span><span>(</span><span class="type-name">Coords</span><span>(</span><span class="number-literal">50</span><span>, </span><span class="number-literal">50</span><span>))
        .</span><span class="identifier">copy</span><span>(</span><span class="identifier">reference</span><span> = </span><span class="identifier">model</span><span>.</span><span class="identifier">numOfLabels</span><span>)

      </span><span class="identifier">model</span><span>.</span><span class="identifier">components</span><span>.</span><span class="identifier">update</span><span>(</span><span class="identifier">ctx</span><span>)(</span><span class="identifier">e</span><span>).</span><span class="identifier">map</span><span> { </span><span class="identifier">cl</span><span> =&gt;
        </span><span class="identifier">model</span><span>.</span><span class="identifier">copy</span><span>(</span><span class="identifier">components</span><span> = </span><span class="identifier">cl</span><span>)
      }</span></code></pre>
        
        <h3 id="presenting-the-component-list" class="section"><a class="anchor-link left" href="#presenting-the-component-list"><i class="icofont-laika link">&#xef71;</i></a>Presenting the component list</h3>
        <p>The component list knows how to render everything, we just need to call the <code>present</code> method
        with, once again, and instance of UIContext, and provide the results to a SceneUpdateFragment.</p>
        <pre class="keep-together pdf epub"><code class="nohighlight"><span>  </span><span class="keyword">def</span><span> </span><span class="declaration-name">present</span><span>(</span><span class="identifier">context</span><span>: </span><span class="type-name">Context</span><span>[</span><span class="type-name">Unit</span><span>], </span><span class="identifier">model</span><span>: </span><span class="type-name">Model</span><span>): </span><span class="type-name">Outcome</span><span>[</span><span class="type-name">SceneUpdateFragment</span><span>] =
    </span><span class="keyword">val</span><span> </span><span class="identifier">ctx</span><span> = </span><span class="type-name">UIContext</span><span>(</span><span class="identifier">context</span><span>, </span><span class="number-literal">1</span><span>)
      .</span><span class="identifier">moveParentBy</span><span>(</span><span class="type-name">Coords</span><span>(</span><span class="number-literal">50</span><span>, </span><span class="number-literal">50</span><span>))
      .</span><span class="identifier">copy</span><span>(</span><span class="identifier">reference</span><span> = </span><span class="identifier">model</span><span>.</span><span class="identifier">numOfLabels</span><span>)

    </span><span class="identifier">model</span><span>.</span><span class="identifier">components</span><span>
      .</span><span class="identifier">present</span><span>(</span><span class="identifier">ctx</span><span>)
      .</span><span class="identifier">map</span><span>(</span><span class="identifier">l</span><span> =&gt; </span><span class="type-name">SceneUpdateFragment</span><span>(</span><span class="identifier">l</span><span>))</span></code></pre>

        
<hr class="footer-rule"/>
<footer>
  Site generated by <a href="https://typelevel.org/Laika/">Laika</a> with the Helium theme.
</footer>


      </main>

    </div>

  </body>

</html>