<!DOCTYPE html>
<html lang="en">
  
  <head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="generator" content="Typelevel Laika + Helium Theme" />
  <title>UI Components: Windows</title>
  
  
  <meta name="description" content="An FP game engine for Scala."/>
  
  
  
  <link rel="icon" sizes="32x32" type="image/png" href="../../../img/favicon.png"/>
  
  
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lato:400,700">
  
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Fira+Mono:500">
  
  <link rel="stylesheet" type="text/css" href="../../../helium/site/icofont.min.css" />
    <link rel="stylesheet" type="text/css" href="../../../helium/site/laika-helium.css" />
    <link rel="stylesheet" type="text/css" href="../../../css/custom.css" />
  <script src="../../../helium/site/laika-helium.js"></script>
  
  
  <script> /* for avoiding page load transitions */ </script>
</head>

  <body>

    <header id="top-bar" class="light-default dark-default">

  <div class="row">
    <a id="nav-icon">
      <i class="icofont-laika navigationMenu" title="Navigation">&#xefa2;</i>
    </a>
    
    
  </div>

  <a class="image-link" href="../../../documentation/"><img src="../../../img/indigo_logo_solid_text.svg" alt="An FP game engine for Scala." title="Indigo" width="150" height="50"></a>

  <div class="row links">
    
    <a class="button-link" href="https://purplekingdomgames.github.io/indigo-docs/demos">Live Demos</a>
    
    <a class="button-link" href="https://discord.gg/b5CD47g">Discord</a>
    
    <a class="button-link" href="https://github.com/PurpleKingdomGames/indigo">Github</a>
    
  </div>  

</header>
    
    <nav id="sidebar">

  <div class="row">
    
    <a class="button-link" href="https://purplekingdomgames.github.io/indigo-docs/demos">Live Demos</a>
    
    <a class="button-link" href="https://discord.gg/b5CD47g">Discord</a>
    
    <a class="button-link" href="https://github.com/PurpleKingdomGames/indigo">Github</a>
    
  </div>

  <ul class="nav-list">
    <li class="level1 nav-node"><a href="../../../documentation/">Indigo</a></li>
    <li class="level2 nav-header">Setup &amp; Configuration</li>
    <li class="level3 nav-leaf"><a href="../../../documentation/01-quickstart/examples.html">Examples, Demos, and References</a></li>
    <li class="level3 nav-leaf"><a href="../../../documentation/01-quickstart/extensions-and-libs.html">Extensions, Libraries, and Related Projects</a></li>
    <li class="level3 nav-leaf"><a href="../../../documentation/01-quickstart/hello-indigo.html">Hello, Indigo!</a></li>
    <li class="level3 nav-leaf"><a href="../../../documentation/01-quickstart/project-templates.html">Mill &amp; SBT Templates</a></li>
    <li class="level3 nav-leaf"><a href="../../../documentation/01-quickstart/quickstart.html">Quick start</a></li>
    <li class="level2 nav-header">Guides</li>
    <li class="level3 nav-leaf"><a href="../../../documentation/02-guides/howto-custom-entity.html">How to make a custom entity</a></li>
    <li class="level3 nav-leaf"><a href="../../../documentation/02-guides/howto-fire-shader.html">How to write a fire shader</a></li>
    <li class="level3 nav-leaf"><a href="../../../documentation/02-guides/howto-hello-indigo-tyrian.html">How to make a responsive UI using Tyrian</a></li>
    <li class="level3 nav-leaf"><a href="../../../documentation/02-guides/howto-indigo-game.html">Converting <code>IndigoSandbox</code> to <code>IndigoGame</code></a></li>
    <li class="level2 nav-header">Gameloop</li>
    <li class="level3 nav-leaf"><a href="../../../documentation/03-gameloop/events.html">Events</a></li>
    <li class="level3 nav-leaf"><a href="../../../documentation/03-gameloop/frame-context.html">Frame context</a></li>
    <li class="level3 nav-leaf"><a href="../../../documentation/03-gameloop/outcome.html">Outcome Type</a></li>
    <li class="level2 nav-header">Organisation</li>
    <li class="level3 nav-leaf"><a href="../../../documentation/04-organisation/boot-and-start-up.html">Boot &amp; Start Up</a></li>
    <li class="level3 nav-leaf"><a href="../../../documentation/04-organisation/game-entry-points.html">Game Entry Points</a></li>
    <li class="level3 nav-leaf"><a href="../../../documentation/04-organisation/scene-management.html">What are Scenes?</a></li>
    <li class="level3 nav-leaf"><a href="../../../documentation/04-organisation/subsystems.html">What SubSystems are</a></li>
    <li class="level2 nav-header">Platform &amp; IO</li>
    <li class="level3 nav-leaf"><a href="../../../documentation/05-platform/assets.html">Assets &amp; Asset Loading</a></li>
    <li class="level3 nav-leaf"><a href="../../../documentation/05-platform/configuration.html">Game Configuration</a></li>
    <li class="level3 nav-leaf"><a href="../../../documentation/05-platform/cross-platform-publishing.html">Cross Platform Publishing</a></li>
    <li class="level3 nav-leaf"><a href="../../../documentation/05-platform/importers.html">File Importers</a></li>
    <li class="level3 nav-leaf"><a href="../../../documentation/05-platform/input-handling.html">Input Handling</a></li>
    <li class="level3 nav-leaf"><a href="../../../documentation/05-platform/loading-and-saving-data.html">Loading &amp; Saving Data</a></li>
    <li class="level3 nav-leaf"><a href="../../../documentation/05-platform/logging.html">Logging</a></li>
    <li class="level3 nav-leaf"><a href="../../../documentation/05-platform/networking.html">Networking</a></li>
    <li class="level2 nav-header">Presentation</li>
    <li class="level3 nav-leaf"><a href="../../../documentation/06-presentation/animation.html">Animation</a></li>
    <li class="level3 nav-leaf"><a href="../../../documentation/06-presentation/audio.html">Audio</a></li>
    <li class="level3 nav-leaf"><a href="../../../documentation/06-presentation/boundaries.html">Boundaries</a></li>
    <li class="level3 nav-leaf"><a href="../../../documentation/06-presentation/cameras.html">Cameras</a></li>
    <li class="level3 nav-leaf"><a href="../../../documentation/06-presentation/clones-and-mutants.html">Clones &amp; Mutants</a></li>
    <li class="level3 nav-leaf"><a href="../../../documentation/06-presentation/depth.html">Depth</a></li>
    <li class="level3 nav-leaf"><a href="../../../documentation/06-presentation/layers.html">Layers</a></li>
    <li class="level3 nav-leaf"><a href="../../../documentation/06-presentation/lighting.html">Lighting</a></li>
    <li class="level3 nav-leaf"><a href="../../../documentation/06-presentation/materials.html">Materials</a></li>
    <li class="level3 nav-leaf"><a href="../../../documentation/06-presentation/primitives.html">Primitives &amp; Building Blocks</a></li>
    <li class="level3 nav-leaf"><a href="../../../documentation/06-presentation/scene-update-fragment.html">SceneUpdateFragment</a></li>
    <li class="level3 nav-leaf"><a href="../../../documentation/06-presentation/shapes.html">Shapes</a></li>
    <li class="level3 nav-leaf"><a href="../../../documentation/06-presentation/text-and-fonts.html">Text &amp; Fonts</a></li>
    <li class="level2 nav-header">Shaders</li>
    <li class="level3 nav-leaf"><a href="../../../documentation/07-shaders/blending.html">Blending</a></li>
    <li class="level3 nav-leaf"><a href="../../../documentation/07-shaders/constants.html">Shader Constants, Variables, and Outputs</a></li>
    <li class="level3 nav-leaf"><a href="../../../documentation/07-shaders/premultiplied-alpha.html">Premultiplied Alpha</a></li>
    <li class="level3 nav-leaf"><a href="../../../documentation/07-shaders/shaders-overview.html">Shaders Overview</a></li>
    <li class="level2 nav-header">Time</li>
    <li class="level3 nav-leaf"><a href="../../../documentation/08-time/gametime.html">GameTime</a></li>
    <li class="level3 nav-leaf"><a href="../../../documentation/08-time/signals.html">Signals &amp; Signal Functions</a></li>
    <li class="level3 nav-leaf"><a href="../../../documentation/08-time/time-varying-values.html">Time Varying Values</a></li>
    <li class="level2 nav-header">UI Components</li>
    <li class="level3 nav-leaf"><a href="../../../documentation/09-uicomponents/button.html">Buttons</a></li>
    <li class="level3 nav-leaf"><a href="../../../documentation/09-uicomponents/hit-area.html">Hit Areas</a></li>
    <li class="level3 nav-leaf"><a href="../../../documentation/09-uicomponents/input-field.html">Input Fields</a></li>
    <li class="level3 nav-leaf"><a href="../../../documentation/09-uicomponents/radio-button.html">Radio Buttons</a></li>
    <li class="level3 nav-leaf"><a href="../../../documentation/09-uicomponents/ui-components.html">UI Components</a></li>
    <li class="level2 nav-header">Misc</li>
    <li class="level3 nav-leaf"><a href="../../../documentation/10-information/alternatives.html">Alternatives to Indigo</a></li>
    <li class="level3 nav-leaf"><a href="../../../documentation/10-information/antipatterns.html">Anti-Patterns</a></li>
    <li class="level3 nav-leaf"><a href="../../../documentation/10-information/glossary.html">Glossary</a></li>
    <li class="level3 nav-leaf"><a href="../../../documentation/10-information/key-concepts.html">Key Concepts</a></li>
    <li class="level3 nav-leaf"><a href="../../../documentation/10-information/model-viewmodel-view.html">Model, ViewModel, &amp; View</a></li>
    <li class="level3 nav-leaf"><a href="../../../documentation/10-information/motivation-and-constraints.html">Motivation &amp; Constraints</a></li>
    <li class="level3 nav-leaf"><a href="../../../documentation/10-information/pathfinding.html">Path finding</a></li>
    <li class="level3 nav-leaf"><a href="../../../documentation/10-information/performance.html">Performance</a></li>
    <li class="level3 nav-leaf"><a href="../../../documentation/10-information/prior-art.html">Prior Art</a></li>
    <li class="level3 nav-leaf"><a href="../../../documentation/10-information/rendering-technology.html">Rendering Technology</a></li>
    <li class="level2 nav-header">Physics</li>
    <li class="level3 nav-leaf"><a href="../../../documentation/11-physics/physics-overview.html">Physics Overview</a></li>
    <li class="level1 nav-node"><a href="../../">Examples</a></li>
    <li class="level2 nav-node"><a href="../../importers/">Importers</a></li>
    <li class="level3 nav-leaf"><a href="../../importers/tiled-loaded/">Loading Tiled maps at runtime</a></li>
    <li class="level2 nav-node"><a href="../../materials/">Materials</a></li>
    <li class="level3 nav-leaf"><a href="../../materials/bitmap/">Bitmap material</a></li>
    <li class="level3 nav-leaf"><a href="../../materials/filltypes/">Fill Types</a></li>
    <li class="level3 nav-leaf"><a href="../../materials/imageeffects/">ImageEffects material</a></li>
    <li class="level2 nav-node"><a href="../../physics/">Physics</a></li>
    <li class="level3 nav-leaf"><a href="../../physics/basics/">Basic Physics Example</a></li>
    <li class="level2 nav-node"><a href="../../primitives/">Primitives</a></li>
    <li class="level3 nav-leaf"><a href="../../primitives/graphic/">Graphic</a></li>
    <li class="level3 nav-leaf"><a href="../../primitives/text/">Text</a></li>
    <li class="level2 nav-node"><a href="../../shaders/">Shaders</a></li>
    <li class="level3 nav-leaf"><a href="../../shaders/basic/">A basic custom shader</a></li>
    <li class="level2 nav-node"><a href="../">Ui</a></li>
    <li class="level3 nav-leaf"><a href="../button/">UI Components: Button</a></li>
    <li class="level3 nav-leaf"><a href="../component-group/">UI Components: Component Group</a></li>
    <li class="level3 nav-leaf"><a href="../component-list/">UI Components: Component List</a></li>
    <li class="level3 nav-leaf"><a href="../custom/">UI Components: Custom Components</a></li>
    <li class="level3 nav-leaf"><a href="../hitarea/">UI Components: HitArea</a></li>
    <li class="level3 nav-leaf"><a href="../input/">UI Components: Label</a></li>
    <li class="level3 nav-leaf"><a href="../label/">UI Components: Label</a></li>
    <li class="level3 nav-leaf"><a href="../maskedpane/">UI Components: Masked Pane</a></li>
    <li class="level3 nav-leaf"><a href="../radiobuttons/">UI Components: Radio buttons</a></li>
    <li class="level3 nav-leaf"><a href="../scrollpane/">UI Components: Scroll Pane</a></li>
    <li class="level3 nav-leaf"><a href="../switch/">UI Components: Switch</a></li>
    <li class="level3 nav-leaf"><a href="../textarea/">UI Components: TextArea</a></li>
    <li class="level3 active nav-leaf"><a href="#">UI Components: Windows</a></li>
  </ul>

</nav>

    <div id="container">

      
<nav id="page-nav">
  <p class="header"><a href="#">UI Components: Windows</a></p>

  <ul class="nav-list">
    <li class="level1 nav-leaf"><a href="#example-links">Example Links</a></li>
    <li class="level1 nav-node"><a href="#how-to-set-up-a-window">How to set up a window</a></li>
    <li class="level2 nav-leaf"><a href="#the-window-and-its-components">The Window and its components</a></li>
    <li class="level2 nav-leaf"><a href="#the-windowmanager">The WindowManager</a></li>
  </ul>

  <p class="footer"></p>
</nav>


      <main class="content">

        <h1 id="ui-components-windows" class="title">UI Components: Windows</h1>
        <p>In this example, we look at how to set up and manage a window using the Window Manager sub-system.</p>
        <p>The window manager takes away a lot of the complexity of managing a known set of windows. Allowing you to perform actions like opening, closing, focusing, and moving them around, using a simple set of events.</p>
        <p>Windows themselves are little more than containers for a component (which could itself be a group of more components) that provide the space on the screen for the components to live in. However that is all that they are. They provide no UI functionality on their own beyond optionally drawing a background, and any controls you might expect to see, such as a close button for example, need to be built and added manually.</p>
        <p>If you expect to have a lot of windows that look the same, you can build an abstraction over the window to provide common functionality, and example of this can be found in the <a href="https://github.com/PurpleKingdomGames/roguelike-starterkit">roguelike-starterkit</a>, which provides simple Terminal / ASCII style windows. This UI system is supposed to provide the bedrock for you to build upon, not provide out-of-box ready to use UIs.</p>
        
        <h2 id="example-links" class="section"><a class="anchor-link left" href="#example-links"><i class="icofont-laika link">&#xef71;</i></a>Example Links</h2>
        <ul>
          <li><a href="https://github.com/PurpleKingdomGames/indigo-docs/blob/main/examples/ui/window">Edit this page</a></li>
        </ul>
        <ul>
          <li><a href="https://purplekingdomgames.github.io/indigo-docs//demos/examples/ui/window/">Live demo</a></li>
        </ul>
        
        <h2 id="how-to-set-up-a-window" class="section"><a class="anchor-link left" href="#how-to-set-up-a-window"><i class="icofont-laika link">&#xef71;</i></a>How to set up a window</h2>
        
        <h3 id="the-window-and-its-components" class="section"><a class="anchor-link left" href="#the-window-and-its-components"><i class="icofont-laika link">&#xef71;</i></a>The Window and its components</h3>
        <p>The window itself has only a few properties. It needs a unique ID, the size of the grid the
        components live on (usually 1, but ASCII art might be a larger grid, for example), the minimum
        size of the window, and finally the content.</p>
        <p>The content can be anything that has a <code>Component</code> instance for it. In our case we&#39;re going to
        build out some of the usual &#39;window&#39; functionality, such as a close button. Grouped together,
        these sorts of components are sometimes called the window&#39;s &#39;chrome&#39;.</p>
        <p>There are other properties to the window, and below we set a start size and tell it how to
        draw a background.</p>
        <pre><code class="nohighlight"><span>  </span><span class="keyword">val</span><span> </span><span class="identifier">windowId</span><span>: </span><span class="type-name">WindowId</span><span> =
    </span><span class="type-name">WindowId</span><span>(</span><span class="string-literal">&quot;my window&quot;</span><span>)

  </span><span class="keyword">val</span><span> </span><span class="identifier">window</span><span>: </span><span class="type-name">Window</span><span>[</span><span class="type-name">ComponentGroup</span><span>[</span><span class="type-name">Int</span><span>], </span><span class="type-name">Int</span><span>] =
    </span><span class="type-name">Window</span><span>(
      </span><span class="identifier">id</span><span> = </span><span class="identifier">windowId</span><span>,
      </span><span class="identifier">snapGrid</span><span> = </span><span class="type-name">Size</span><span>(</span><span class="number-literal">1</span><span>),
      </span><span class="identifier">minSize</span><span> = </span><span class="type-name">Dimensions</span><span>(</span><span class="number-literal">128</span><span>, </span><span class="number-literal">64</span><span>),
      </span><span class="identifier">content</span><span> = </span><span class="identifier">windowChrome</span><span>(</span><span class="string-literal">&quot;Hello, Window!&quot;</span><span>)
    )
      .</span><span class="identifier">resizeTo</span><span>(</span><span class="number-literal">320</span><span>, </span><span class="number-literal">240</span><span>)
      .</span><span class="identifier">withBackground</span><span> { </span><span class="identifier">windowContext</span><span> =&gt;
        </span><span class="type-name">Outcome</span><span>(
          </span><span class="type-name">Layer</span><span>.</span><span class="type-name">Content</span><span>(
            </span><span class="type-name">Shape</span><span>.</span><span class="type-name">Box</span><span>(
              </span><span class="identifier">windowContext</span><span>.</span><span class="identifier">bounds</span><span>.</span><span class="identifier">unsafeToRectangle</span><span>,
              </span><span class="keyword">if</span><span> </span><span class="identifier">windowContext</span><span>.</span><span class="identifier">hasFocus</span><span> </span><span class="identifier">then</span><span> </span><span class="type-name">Fill</span><span>.</span><span class="type-name">Color</span><span>(</span><span class="type-name">RGBA</span><span>.</span><span class="type-name">SlateGray</span><span>)
              </span><span class="keyword">else</span><span> </span><span class="type-name">Fill</span><span>.</span><span class="type-name">Color</span><span>(</span><span class="type-name">RGBA</span><span>.</span><span class="type-name">SlateGray</span><span>.</span><span class="identifier">mix</span><span>(</span><span class="type-name">RGBA</span><span>.</span><span class="type-name">Black</span><span>)),
              </span><span class="type-name">Stroke</span><span>(</span><span class="number-literal">1</span><span>, </span><span class="type-name">RGBA</span><span>.</span><span class="type-name">White</span><span>)
            )
          )
        )

      }</span></code></pre>
        <p>The window chrome is a <code>ComponentGroup</code> that contains all the components that make up the
        window. In this case, we have a title bar, a close button, a resize button and the window
        content itself which starts with a MaskedPane that contains a label.</p>
        <p>The <code>ComponentGroup</code> is a layout component, so it can contain other components and arrange
        them. In this case, we&#39;re using a vertical layout with some padding.</p>
        <p>Normally, content in a component group is laid out by &#39;flowing&#39; the components in the order
        they were added. So in this case we have a vertical layout, and all new content items are
        added below the last one.</p>
        <p>However, that isn&#39;t what we want for the standard chrome components of a window, for example,
        we always want the close button in the top right corner, no matter what else is happening. To
        arrange these special fixed position elements, we use the <code>anchor</code> method. This method takes a
        component and an anchor point. The anchor point is a position on the window where the
        component will be placed (anchored).</p>
        <p>Another important point to note is the bounds mode. Here, we&#39;re using <code>BoundsMode.inherit</code>
        because this will make this component group &#39;inherit&#39; the bounds provided to it by it&#39;s
        parent, in this case, the Window instance.</p>
        <pre><code class="nohighlight"><span class="keyword">def</span><span> </span><span class="declaration-name">windowChrome</span><span>(</span><span class="identifier">title</span><span>: </span><span class="type-name">String</span><span>): </span><span class="type-name">ComponentGroup</span><span>[</span><span class="type-name">Int</span><span>] =
  </span><span class="type-name">ComponentGroup</span><span>()
    .</span><span class="identifier">withBoundsMode</span><span>(</span><span class="type-name">BoundsMode</span><span>.</span><span class="identifier">inherit</span><span>)
    .</span><span class="identifier">withLayout</span><span>(</span><span class="type-name">ComponentLayout</span><span>.</span><span class="type-name">Vertical</span><span>(</span><span class="type-name">Padding</span><span>(</span><span class="number-literal">3</span><span>, </span><span class="number-literal">1</span><span>, </span><span class="number-literal">1</span><span>, </span><span class="number-literal">1</span><span>)))
    .</span><span class="identifier">anchor</span><span>(
      </span><span class="identifier">content</span><span>,
      </span><span class="type-name">Anchor</span><span>.</span><span class="type-name">TopLeft</span><span>.</span><span class="identifier">withPadding</span><span>(</span><span class="type-name">Padding</span><span>(</span><span class="number-literal">20</span><span>, </span><span class="number-literal">1</span><span>, </span><span class="number-literal">1</span><span>, </span><span class="number-literal">1</span><span>))
    )
    .</span><span class="identifier">anchor</span><span>(
      </span><span class="identifier">titleBar</span><span>(</span><span class="identifier">title</span><span>)
        .</span><span class="identifier">onDrag</span><span> { (</span><span class="identifier">_</span><span>: </span><span class="type-name">Int</span><span>, </span><span class="identifier">dragData</span><span>) =&gt;
          </span><span class="type-name">Batch</span><span>(
            </span><span class="type-name">WindowEvent</span><span>
              .</span><span class="type-name">Move</span><span>(
                </span><span class="identifier">windowId</span><span>,
                </span><span class="identifier">dragData</span><span>.</span><span class="identifier">position</span><span> - </span><span class="identifier">dragData</span><span>.</span><span class="identifier">offset</span><span>,
                </span><span class="type-name">Space</span><span>.</span><span class="type-name">Screen</span><span>
              )
          )
        }
        .</span><span class="identifier">reportDrag</span><span>
        .</span><span class="identifier">withBoundsType</span><span>(</span><span class="type-name">BoundsType</span><span>.</span><span class="type-name">FillWidth</span><span>(</span><span class="number-literal">20</span><span>, </span><span class="type-name">Padding</span><span>(</span><span class="number-literal">0</span><span>))),
      </span><span class="type-name">Anchor</span><span>.</span><span class="type-name">TopLeft</span><span>
    )
    .</span><span class="identifier">anchor</span><span>(
      </span><span class="identifier">resizeWindowButton</span><span>.</span><span class="identifier">onDrag</span><span> { (</span><span class="identifier">_</span><span>: </span><span class="type-name">Int</span><span>, </span><span class="identifier">dragData</span><span>) =&gt;
        </span><span class="type-name">Batch</span><span>(
          </span><span class="type-name">WindowEvent</span><span>
            .</span><span class="type-name">Resize</span><span>(
              </span><span class="identifier">windowId</span><span>,
              </span><span class="identifier">dragData</span><span>.</span><span class="identifier">position</span><span>.</span><span class="identifier">toDimensions</span><span>,
              </span><span class="type-name">Space</span><span>.</span><span class="type-name">Screen</span><span>
            )
        )
      }.</span><span class="identifier">reportDrag</span><span>,
      </span><span class="type-name">Anchor</span><span>.</span><span class="type-name">BottomRight</span><span>
    )
    .</span><span class="identifier">anchor</span><span>(
      </span><span class="identifier">closeWindowButton</span><span>
        .</span><span class="identifier">onClick</span><span>(
          </span><span class="type-name">WindowEvent</span><span>.</span><span class="type-name">Close</span><span>(</span><span class="identifier">windowId</span><span>)
        ),
      </span><span class="type-name">Anchor</span><span>.</span><span class="type-name">TopRight</span><span>
    )</span></code></pre>
        <p>The chrome components and the content itself have been made in exactly the same way as the components presented in the other examples.</p>
        
        <h3 id="the-windowmanager" class="section"><a class="anchor-link left" href="#the-windowmanager"><i class="icofont-laika link">&#xef71;</i></a>The WindowManager</h3>
        <p>To use the manager we need to be able to set up a subsystem, and for that we need at least
        <code>IndigoDemo</code> or <code>IndigoGame</code> as our entry point. <code>IndigoSandbox</code> is not sufficient.</p>
        <p>In this basic example, there are only two things we need to do to get the window manager up and
        running:</p>
        <ol class="arabic">
          <li>Set up the boot data correctly with the window manager subsystem;</li>
          <li>Pre-allocate a layer stack for the windows to be drawn into.</li>
        </ol>
        <p>In more complex set ups, you would certainly have things like events being sent from your
        windows and handled in the update function, affecting your main game model, but we haven&#39;t done
        that here.</p>
        <pre class="keep-together pdf epub"><code class="nohighlight"><span class="annotation">@JSExportTopLevel</span><span>(</span><span class="string-literal">&quot;IndigoGame&quot;</span><span>)
</span><span class="keyword">object</span><span> </span><span class="type-name">WindowExample</span><span> </span><span class="keyword">extends</span><span> </span><span class="type-name">IndigoDemo</span><span>[</span><span class="type-name">BootData</span><span>, </span><span class="type-name">StartUpData</span><span>, </span><span class="type-name">Model</span><span>, </span><span class="type-name">ViewModel</span><span>]:</span></code></pre>
        <p>The boot function is where you set up the initial game configuration. In our example, we need
        to first ensure we set up the required shaders, and then boot our window manager.</p>
        <p>By setting up the window manager here, it is a &#39;global&#39; window manager. If we&#39;d used
        <code>IndigoGame</code> instead of <code>IndigoDemo</code>, we could have set up a window manager per scene either
        in addition or instead of the global one.</p>
        <p>There are just a few things to draw attention to here with regards to the window manager
        initialisation:</p>
        <ol class="arabic">
          <li><code>extractReference</code>` is a function that takes the model and reads some values out it, that
          the windows and there components can then use (as a &#39;reference&#39;).</li>
          <li>The <code>startUpData</code> isn&#39;t in use here, but it allows you to set some initialisation data
          your windows can make use of.</li>
          <li>The <code>layerKey</code> is important because it tells the window manager where to draw the
          windows. See below for more details.</li>
        </ol>
        <p>With the instance created, we then need to register our windows with it, and at this moment we
        can also do things like set the window&#39;s initial position if we like. This does mean that all
        windows must be &#39;known&#39; in advance. There are no dynamically generated windows at this time.
        Windows can have dynamic <em>content</em> by utilising the <code>ComponentList</code> or by making custom
        components.</p>
        <p>We can also, optionally, tell the window manager which windows should be immediately open.
        Anything not in the open list will, naturally, be closed and invisible until you tell the
        window manager to open them by sending the <code>WindowEvent.Open</code> event with the relevant window
        ID.</p>
        <pre><code class="nohighlight"><span class="keyword">def</span><span> </span><span class="declaration-name">boot</span><span>(</span><span class="identifier">flags</span><span>: </span><span class="type-name">Map</span><span>[</span><span class="type-name">String</span><span>, </span><span class="type-name">String</span><span>]): </span><span class="type-name">Outcome</span><span>[</span><span class="type-name">BootResult</span><span>[</span><span class="type-name">BootData</span><span>, </span><span class="type-name">Model</span><span>]] =
  </span><span class="type-name">Outcome</span><span>(
    </span><span class="type-name">BootResult</span><span>(
      </span><span class="type-name">Config</span><span>.</span><span class="identifier">config</span><span>.</span><span class="identifier">noResize</span><span>,
      </span><span class="type-name">BootData</span><span>.</span><span class="identifier">empty</span><span>
    )
      .</span><span class="identifier">withFonts</span><span>(</span><span class="type-name">DefaultFont</span><span>.</span><span class="identifier">fontInfo</span><span>)
      .</span><span class="identifier">withAssets</span><span>(</span><span class="type-name">Assets</span><span>.</span><span class="identifier">assets</span><span>.</span><span class="identifier">assetSet</span><span> ++ </span><span class="type-name">Assets</span><span>.</span><span class="identifier">assets</span><span>.</span><span class="identifier">generated</span><span>.</span><span class="identifier">assetSet</span><span>)
      .</span><span class="identifier">withShaders</span><span>(</span><span class="identifier">indigoextras</span><span>.</span><span class="identifier">ui</span><span>.</span><span class="identifier">shaders</span><span>.</span><span class="identifier">all</span><span>)
      .</span><span class="identifier">withSubSystems</span><span>(
        </span><span class="type-name">WindowManager</span><span>[</span><span class="type-name">Unit</span><span>, </span><span class="type-name">Model</span><span>, </span><span class="type-name">Int</span><span>](
          </span><span class="identifier">id</span><span> = </span><span class="type-name">SubSystemId</span><span>(</span><span class="string-literal">&quot;window-manager&quot;</span><span>),
          </span><span class="identifier">magnification</span><span> = </span><span class="number-literal">1</span><span>,
          </span><span class="identifier">snapGrid</span><span> = </span><span class="type-name">Size</span><span>(</span><span class="number-literal">1</span><span>),
          </span><span class="identifier">extractReference</span><span> = </span><span class="identifier">_</span><span>.</span><span class="identifier">num</span><span>,
          </span><span class="identifier">startUpData</span><span> = (),
          </span><span class="identifier">layerKey</span><span> = </span><span class="type-name">LayerKey</span><span>(</span><span class="string-literal">&quot;windows&quot;</span><span>)
        )
          .</span><span class="identifier">register</span><span>(</span><span class="type-name">CustomUI</span><span>.</span><span class="identifier">window</span><span>.</span><span class="identifier">moveTo</span><span>(</span><span class="number-literal">15</span><span>, </span><span class="number-literal">15</span><span>))
          .</span><span class="identifier">open</span><span>(</span><span class="type-name">CustomUI</span><span>.</span><span class="identifier">window</span><span>.</span><span class="identifier">id</span><span>)
      )
  )</span></code></pre>
        <p>During the main game presentation we need to provide a placeholder for the windows to be drawn
        into. By adding this here, we are guaranteeing the placement of the windows in amoung the
        other game elements.</p>
        <p>In this example we only have one layer, but consider a more complex set up where you want to
        be sure of the order, for example:</p>
        <ul>
          <li>Background</li>
          <li>Game elements</li>
          <li>Game UI windows (e.g. inventory, character sheet, etc) which can be paused and greyed out.</li>
          <li>Main menus (e.g. pause menu, game settings, etc)</li>
        </ul>
        <pre class="keep-together pdf epub"><code class="nohighlight"><span class="keyword">def</span><span> </span><span class="declaration-name">present</span><span>(
    </span><span class="identifier">context</span><span>: </span><span class="type-name">Context</span><span>[</span><span class="type-name">StartUpData</span><span>],
    </span><span class="identifier">model</span><span>: </span><span class="type-name">Model</span><span>,
    </span><span class="identifier">viewModel</span><span>: </span><span class="type-name">ViewModel</span><span>
): </span><span class="type-name">Outcome</span><span>[</span><span class="type-name">SceneUpdateFragment</span><span>] =
  </span><span class="type-name">Outcome</span><span>(
    </span><span class="type-name">SceneUpdateFragment</span><span>(
      </span><span class="type-name">LayerKey</span><span>(</span><span class="string-literal">&quot;windows&quot;</span><span>) -&gt; </span><span class="type-name">Layer</span><span>.</span><span class="type-name">Stack</span><span>.</span><span class="identifier">empty</span><span>
    )
  )</span></code></pre>

        
<hr class="footer-rule"/>
<footer>
  Site generated by <a href="https://typelevel.org/Laika/">Laika</a> with the Helium theme.
</footer>


      </main>

    </div>

  </body>

</html>