<!DOCTYPE html>
<html lang="en">
  
  <head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="generator" content="Typelevel Laika + Helium Theme" />
  <title>Outcome Type</title>
  
  
  <meta name="description" content="An FP game engine for Scala."/>
  
  
  
  <link rel="icon" sizes="32x32" type="image/png" href="../../img/favicon.png"/>
  
  
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lato:400,700">
  
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Fira+Mono:500">
  
  <link rel="stylesheet" type="text/css" href="../../helium/site/icofont.min.css" />
    <link rel="stylesheet" type="text/css" href="../../helium/site/laika-helium.css" />
    <link rel="stylesheet" type="text/css" href="../../css/custom.css" />
  <script src="../../helium/site/laika-helium.js"></script>
  
  
  <script> /* for avoiding page load transitions */ </script>
</head>

  <body>

    <header id="top-bar" class="light-default dark-default">

  <div class="row">
    <a id="nav-icon">
      <i class="icofont-laika navigationMenu" title="Navigation">&#xefa2;</i>
    </a>
    
    
  </div>

  <a class="image-link" href="../"><img src="../../img/indigo_logo_solid_text.svg" alt="An FP game engine for Scala." title="Indigo" width="150" height="50"></a>

  <div class="row links">
    
    <a class="button-link" href="https://purplekingdomgames.github.io/indigo-docs/demos">Live Demos</a>
    
    <a class="button-link" href="https://discord.gg/b5CD47g">Discord</a>
    
    <a class="button-link" href="https://github.com/PurpleKingdomGames/indigo">Github</a>
    
  </div>  

</header>
    
    <nav id="sidebar">

  <div class="row">
    
    <a class="button-link" href="https://purplekingdomgames.github.io/indigo-docs/demos">Live Demos</a>
    
    <a class="button-link" href="https://discord.gg/b5CD47g">Discord</a>
    
    <a class="button-link" href="https://github.com/PurpleKingdomGames/indigo">Github</a>
    
  </div>

  <ul class="nav-list">
    <li class="level1 nav-node"><a href="../">Indigo</a></li>
    <li class="level2 nav-header">Setup &amp; Configuration</li>
    <li class="level3 nav-leaf"><a href="../01-quickstart/examples.html">Examples, Demos, and References</a></li>
    <li class="level3 nav-leaf"><a href="../01-quickstart/extensions-and-libs.html">Extensions, Libraries, and Related Projects</a></li>
    <li class="level3 nav-leaf"><a href="../01-quickstart/hello-indigo.html">Hello, Indigo!</a></li>
    <li class="level3 nav-leaf"><a href="../01-quickstart/project-templates.html">Mill &amp; SBT Templates</a></li>
    <li class="level3 nav-leaf"><a href="../01-quickstart/quickstart.html">Quick start</a></li>
    <li class="level2 nav-header">Guides</li>
    <li class="level3 nav-leaf"><a href="../02-guides/howto-custom-entity.html">How to make a custom entity</a></li>
    <li class="level3 nav-leaf"><a href="../02-guides/howto-fire-shader.html">How to write a fire shader</a></li>
    <li class="level3 nav-leaf"><a href="../02-guides/howto-hello-indigo-tyrian.html">How to make a responsive UI using Tyrian</a></li>
    <li class="level3 nav-leaf"><a href="../02-guides/howto-indigo-game.html">Converting <code>IndigoSandbox</code> to <code>IndigoGame</code></a></li>
    <li class="level2 nav-header">Gameloop</li>
    <li class="level3 nav-leaf"><a href="events.html">Events</a></li>
    <li class="level3 nav-leaf"><a href="frame-context.html">Frame context</a></li>
    <li class="level3 active nav-leaf"><a href="#">Outcome Type</a></li>
    <li class="level2 nav-header">Organisation</li>
    <li class="level3 nav-leaf"><a href="../04-organisation/boot-and-start-up.html">Boot &amp; Start Up</a></li>
    <li class="level3 nav-leaf"><a href="../04-organisation/game-entry-points.html">Game Entry Points</a></li>
    <li class="level3 nav-leaf"><a href="../04-organisation/scene-management.html">What are Scenes?</a></li>
    <li class="level3 nav-leaf"><a href="../04-organisation/subsystems.html">What SubSystems are</a></li>
    <li class="level2 nav-header">Platform &amp; IO</li>
    <li class="level3 nav-leaf"><a href="../05-platform/assets.html">Assets &amp; Asset Loading</a></li>
    <li class="level3 nav-leaf"><a href="../05-platform/configuration.html">Game Configuration</a></li>
    <li class="level3 nav-leaf"><a href="../05-platform/cross-platform-publishing.html">Cross Platform Publishing</a></li>
    <li class="level3 nav-leaf"><a href="../05-platform/importers.html">File Importers</a></li>
    <li class="level3 nav-leaf"><a href="../05-platform/input-handling.html">Input Handling</a></li>
    <li class="level3 nav-leaf"><a href="../05-platform/loading-and-saving-data.html">Loading &amp; Saving Data</a></li>
    <li class="level3 nav-leaf"><a href="../05-platform/logging.html">Logging</a></li>
    <li class="level3 nav-leaf"><a href="../05-platform/networking.html">Networking</a></li>
    <li class="level2 nav-header">Presentation</li>
    <li class="level3 nav-leaf"><a href="../06-presentation/animation.html">Animation</a></li>
    <li class="level3 nav-leaf"><a href="../06-presentation/audio.html">Audio</a></li>
    <li class="level3 nav-leaf"><a href="../06-presentation/boundaries.html">Boundaries</a></li>
    <li class="level3 nav-leaf"><a href="../06-presentation/cameras.html">Cameras</a></li>
    <li class="level3 nav-leaf"><a href="../06-presentation/clones-and-mutants.html">Clones &amp; Mutants</a></li>
    <li class="level3 nav-leaf"><a href="../06-presentation/depth.html">Depth</a></li>
    <li class="level3 nav-leaf"><a href="../06-presentation/layers.html">Layers</a></li>
    <li class="level3 nav-leaf"><a href="../06-presentation/lighting.html">Lighting</a></li>
    <li class="level3 nav-leaf"><a href="../06-presentation/materials.html">Materials</a></li>
    <li class="level3 nav-leaf"><a href="../06-presentation/primitives.html">Primitives &amp; Building Blocks</a></li>
    <li class="level3 nav-leaf"><a href="../06-presentation/scene-update-fragment.html">SceneUpdateFragment</a></li>
    <li class="level3 nav-leaf"><a href="../06-presentation/shapes.html">Shapes</a></li>
    <li class="level3 nav-leaf"><a href="../06-presentation/text-and-fonts.html">Text &amp; Fonts</a></li>
    <li class="level2 nav-header">Shaders</li>
    <li class="level3 nav-leaf"><a href="../07-shaders/blending.html">Blending</a></li>
    <li class="level3 nav-leaf"><a href="../07-shaders/constants.html">Shader Constants, Variables, and Outputs</a></li>
    <li class="level3 nav-leaf"><a href="../07-shaders/premultiplied-alpha.html">Premultiplied Alpha</a></li>
    <li class="level3 nav-leaf"><a href="../07-shaders/shaders-overview.html">Shaders Overview</a></li>
    <li class="level2 nav-header">Time</li>
    <li class="level3 nav-leaf"><a href="../08-time/gametime.html">GameTime</a></li>
    <li class="level3 nav-leaf"><a href="../08-time/signals.html">Signals &amp; Signal Functions</a></li>
    <li class="level3 nav-leaf"><a href="../08-time/time-varying-values.html">Time Varying Values</a></li>
    <li class="level2 nav-header">UI Components</li>
    <li class="level3 nav-leaf"><a href="../09-uicomponents/button.html">Buttons</a></li>
    <li class="level3 nav-leaf"><a href="../09-uicomponents/hit-area.html">Hit Areas</a></li>
    <li class="level3 nav-leaf"><a href="../09-uicomponents/input-field.html">Input Fields</a></li>
    <li class="level3 nav-leaf"><a href="../09-uicomponents/radio-button.html">Radio Buttons</a></li>
    <li class="level3 nav-leaf"><a href="../09-uicomponents/ui-components.html">UI Components</a></li>
    <li class="level2 nav-header">Misc</li>
    <li class="level3 nav-leaf"><a href="../10-information/alternatives.html">Alternatives to Indigo</a></li>
    <li class="level3 nav-leaf"><a href="../10-information/antipatterns.html">Anti-Patterns</a></li>
    <li class="level3 nav-leaf"><a href="../10-information/glossary.html">Glossary</a></li>
    <li class="level3 nav-leaf"><a href="../10-information/key-concepts.html">Key Concepts</a></li>
    <li class="level3 nav-leaf"><a href="../10-information/model-viewmodel-view.html">Model, ViewModel, &amp; View</a></li>
    <li class="level3 nav-leaf"><a href="../10-information/motivation-and-constraints.html">Motivation &amp; Constraints</a></li>
    <li class="level3 nav-leaf"><a href="../10-information/pathfinding.html">Path finding</a></li>
    <li class="level3 nav-leaf"><a href="../10-information/performance.html">Performance</a></li>
    <li class="level3 nav-leaf"><a href="../10-information/prior-art.html">Prior Art</a></li>
    <li class="level3 nav-leaf"><a href="../10-information/rendering-technology.html">Rendering Technology</a></li>
    <li class="level2 nav-header">Physics</li>
    <li class="level3 nav-leaf"><a href="../11-physics/physics-overview.html">Physics Overview</a></li>
    <li class="level1 nav-node"><a href="../../examples/">Examples</a></li>
    <li class="level2 nav-node"><a href="../../examples/importers/">Importers</a></li>
    <li class="level3 nav-leaf"><a href="../../examples/importers/tiled-loaded/">Loading Tiled maps at runtime</a></li>
    <li class="level2 nav-node"><a href="../../examples/materials/">Materials</a></li>
    <li class="level3 nav-leaf"><a href="../../examples/materials/bitmap/">Bitmap material</a></li>
    <li class="level3 nav-leaf"><a href="../../examples/materials/filltypes/">Fill Types</a></li>
    <li class="level3 nav-leaf"><a href="../../examples/materials/imageeffects/">ImageEffects material</a></li>
    <li class="level2 nav-node"><a href="../../examples/physics/">Physics</a></li>
    <li class="level3 nav-leaf"><a href="../../examples/physics/basics/">Basic Physics Example</a></li>
    <li class="level2 nav-node"><a href="../../examples/primitives/">Primitives</a></li>
    <li class="level3 nav-leaf"><a href="../../examples/primitives/graphic/">The Graphic Primitive</a></li>
    <li class="level2 nav-node"><a href="../../examples/shaders/">Shaders</a></li>
    <li class="level3 nav-leaf"><a href="../../examples/shaders/basic/">A basic custom shader</a></li>
    <li class="level2 nav-node"><a href="../../examples/ui/">Ui</a></li>
    <li class="level3 nav-leaf"><a href="../../examples/ui/button/">UI Components: Button</a></li>
    <li class="level3 nav-leaf"><a href="../../examples/ui/component-group/">UI Components: Component Group</a></li>
    <li class="level3 nav-leaf"><a href="../../examples/ui/component-list/">UI Components: Component List</a></li>
    <li class="level3 nav-leaf"><a href="../../examples/ui/hitarea/">UI Components: HitArea</a></li>
    <li class="level3 nav-leaf"><a href="../../examples/ui/input/">UI Components: Label</a></li>
    <li class="level3 nav-leaf"><a href="../../examples/ui/label/">UI Components: Label</a></li>
    <li class="level3 nav-leaf"><a href="../../examples/ui/maskedpane/">UI Components: Masked Pane</a></li>
    <li class="level3 nav-leaf"><a href="../../examples/ui/radiobuttons/">UI Components: Radio buttons</a></li>
    <li class="level3 nav-leaf"><a href="../../examples/ui/switch/">UI Components: Switch</a></li>
    <li class="level3 nav-leaf"><a href="../../examples/ui/textarea/">UI Components: TextArea</a></li>
  </ul>

</nav>

    <div id="container">

      
<nav id="page-nav">
  <p class="header"><a href="#">Outcome Type</a></p>

  <ul class="nav-list">
    <li class="level1 nav-leaf"><a href="#what-is-an-outcome">What is an Outcome?</a></li>
    <li class="level1 nav-node"><a href="#examples-of-operations-on-outcomes">Examples of Operations on Outcomes</a></li>
    <li class="level2 nav-leaf"><a href="#basic-operations">Basic operations</a></li>
    <li class="level1 nav-leaf"><a href="#creating-events-based-on-the-state">Creating events based on the state</a></li>
    <li class="level1 nav-leaf"><a href="#error-handling">Error handling</a></li>
  </ul>

  <p class="footer"></p>
</nav>


      <main class="content">

        <h1 id="outcome-type" class="title">Outcome Type</h1>
        
        <h2 id="what-is-an-outcome" class="section"><a class="anchor-link left" href="#what-is-an-outcome"><i class="icofont-laika link">&#xef71;</i></a>What is an Outcome?</h2>
        <p>The <code>Outcome</code> type is one you&#39;ll see a lot.</p>
        <p>All of the key functions produce an Outcome. An Outcome is the combination of an updated piece of state, and a list of <code>GlobalEvent</code>s that updating the state produced. It can also represent an error that you may or may not be able to recover from.</p>
        <p>For example, let&#39;s say you update your game&#39;s model, and it turns out that the player has lost the game somehow. You might need to do two things:</p>
        <ol class="arabic">
          <li>Update the model to reflect the fact that the player&#39;s turn is over - perhaps calculating the final score.</li>
          <li>Emit a <code>JumpTo(SceneName(&quot;game over&quot;))</code> event to tell Indigo to render the Game Over screen.</li>
        </ol>
        <p>This could be described in an Outcome as follows:</p>
        <pre class="keep-together pdf epub"><code class="nohighlight"><span class="keyword">import</span><span> </span><span class="identifier">indigo</span><span>.*
</span><span class="keyword">import</span><span> </span><span class="identifier">indigo</span><span>.</span><span class="identifier">scenes</span><span>.*

</span><span class="keyword">final</span><span> </span><span class="keyword">case</span><span> </span><span class="keyword">class</span><span> </span><span class="type-name">Model</span><span>(</span><span class="identifier">totalScore</span><span>: </span><span class="type-name">Int</span><span>)
</span><span class="keyword">val</span><span> </span><span class="identifier">model</span><span> = </span><span class="type-name">Model</span><span>(</span><span class="number-literal">0</span><span>)
</span><span class="keyword">def</span><span> </span><span class="declaration-name">calculateFinalScore</span><span>(</span><span class="identifier">score</span><span>: </span><span class="type-name">Int</span><span>): </span><span class="type-name">Int</span><span> = </span><span class="identifier">score</span><span> + </span><span class="number-literal">10</span><span>

</span><span class="keyword">val</span><span> </span><span class="identifier">outcome</span><span> = 
  </span><span class="type-name">Outcome</span><span>(</span><span class="identifier">model</span><span>.</span><span class="identifier">copy</span><span>(</span><span class="identifier">totalScore</span><span> = </span><span class="identifier">calculateFinalScore</span><span>(</span><span class="identifier">model</span><span>.</span><span class="identifier">totalScore</span><span>)))
    .</span><span class="identifier">addGlobalEvents</span><span>(</span><span class="type-name">SceneEvent</span><span>.</span><span class="type-name">JumpTo</span><span>(</span><span class="type-name">SceneName</span><span>(</span><span class="string-literal">&quot;game over&quot;</span><span>)))</span></code></pre>
        <p>You can access the state or global events with:</p>
        <pre class="keep-together pdf epub"><code class="nohighlight"><span class="identifier">outcome</span><span>.</span><span class="identifier">getOrElse</span><span>(</span><span class="type-name">Model</span><span>(</span><span class="number-literal">0</span><span>))
</span><span class="identifier">outcome</span><span>.</span><span class="identifier">globalEventsOrNil</span></code></pre>
        <p>Notice that the syntax is similar to an option (<code>getOrElse</code>), this is because outcomes can fail and represent an error that you may be able to recover from.</p>
        <p>However the expectation is that you will generally access the values of an Outcome by mapping or perhaps in a for comprehension.</p>
        
        <h2 id="examples-of-operations-on-outcomes" class="section"><a class="anchor-link left" href="#examples-of-operations-on-outcomes"><i class="icofont-laika link">&#xef71;</i></a>Examples of Operations on Outcomes</h2>
        <p>There are lots of ways to manipulate Outcomes, and all of them preserve the events contained in each Outcome.</p>
        
        <h3 id="basic-operations" class="section"><a class="anchor-link left" href="#basic-operations"><i class="icofont-laika link">&#xef71;</i></a>Basic operations</h3>
        <p>An Outcome behaves much like other Monadic types in Scala such as <code>Option</code> or <code>Either</code>. They are bias towards the state it holds rather than the events. Some basic operations are below:</p>
        <pre class="keep-together pdf epub"><code class="nohighlight"><span class="type-name">Outcome</span><span>(</span><span class="number-literal">10</span><span>)                                </span><span class="comment">// Outcome(10)
</span><span class="type-name">Outcome</span><span>(</span><span class="number-literal">10</span><span>).</span><span class="identifier">map</span><span>(</span><span class="identifier">_</span><span> * </span><span class="number-literal">20</span><span>)                    </span><span class="comment">// Outcome(200)
</span><span class="type-name">Outcome</span><span>(</span><span class="number-literal">10</span><span>).</span><span class="identifier">ap</span><span>(</span><span class="type-name">Outcome</span><span>((</span><span class="identifier">i</span><span>: </span><span class="type-name">Int</span><span>) =&gt; </span><span class="identifier">i</span><span> * </span><span class="number-literal">5</span><span>)) </span><span class="comment">// Outcome(50)
</span><span class="type-name">Outcome</span><span>(</span><span class="number-literal">10</span><span>).</span><span class="identifier">flatMap</span><span>(</span><span class="identifier">i</span><span> =&gt; </span><span class="type-name">Outcome</span><span>(</span><span class="identifier">i</span><span> * </span><span class="number-literal">20</span><span>))  </span><span class="comment">// Outcome(200)
</span><span class="type-name">Outcome</span><span>(</span><span class="number-literal">10</span><span>).</span><span class="identifier">merge</span><span>(</span><span class="type-name">Outcome</span><span>(</span><span class="number-literal">20</span><span>))(</span><span class="identifier">_</span><span> + </span><span class="identifier">_</span><span>)      </span><span class="comment">// Outcome(30)
</span><span class="type-name">Outcome</span><span>(</span><span class="string-literal">&quot;a&quot;</span><span>) </span><span class="identifier">`combine`</span><span> </span><span class="type-name">Outcome</span><span>(</span><span class="string-literal">&quot;b&quot;</span><span>)          </span><span class="comment">// Outcome((&quot;a&quot;, &quot;b&quot;))</span></code></pre>
        <p>As mentioned, <code>Outcome</code>&#39;s map function is bias towards the state, but you can also modify the events with <code>mapGlobalEvents</code>.</p>
        <p>Sequencing can be done as follows:</p>
        <pre class="keep-together pdf epub"><code class="nohighlight"><span class="keyword">import</span><span> </span><span class="type-name">Outcome</span><span>.*

</span><span class="type-name">Batch</span><span>(</span><span class="type-name">Outcome</span><span>(</span><span class="number-literal">1</span><span>), </span><span class="type-name">Outcome</span><span>(</span><span class="number-literal">2</span><span>), </span><span class="type-name">Outcome</span><span>(</span><span class="number-literal">3</span><span>)).</span><span class="identifier">sequence</span><span> </span><span class="comment">// Outcome(Batch(1, 2, 3))</span></code></pre>
        
        <h2 id="creating-events-based-on-the-state" class="section"><a class="anchor-link left" href="#creating-events-based-on-the-state"><i class="icofont-laika link">&#xef71;</i></a>Creating events based on the state</h2>
        <p>Sometimes, you need to reference the new state to decide if we should emit an event:</p>
        <pre class="keep-together pdf epub"><code class="nohighlight"><span class="keyword">final</span><span> </span><span class="keyword">case</span><span> </span><span class="keyword">class</span><span> </span><span class="type-name">Counter</span><span>(</span><span class="identifier">count</span><span>: </span><span class="type-name">Int</span><span>)

</span><span class="keyword">val</span><span> </span><span class="identifier">newState</span><span> = </span><span class="type-name">Counter</span><span>(</span><span class="identifier">count</span><span> = </span><span class="number-literal">10</span><span>)
</span><span class="keyword">val</span><span> </span><span class="identifier">events</span><span> = </span><span class="keyword">if</span><span>(</span><span class="identifier">newState</span><span>.</span><span class="identifier">count</span><span> &gt; </span><span class="number-literal">5</span><span>) </span><span class="type-name">Batch</span><span>(</span><span class="type-name">PlaySound</span><span>(</span><span class="type-name">AssetName</span><span>(</span><span class="string-literal">&quot;tada&quot;</span><span>), </span><span class="type-name">Volume</span><span>.</span><span class="type-name">Max</span><span>)) </span><span class="keyword">else</span><span> </span><span class="type-name">Batch</span><span>.</span><span class="identifier">empty</span><span>

</span><span class="type-name">Outcome</span><span>(</span><span class="identifier">newState</span><span>)
  .</span><span class="identifier">addGlobalEvents</span><span>(</span><span class="identifier">events</span><span>)</span></code></pre>
        <p>But this is boring and requires the creation of a couple of variables. The thing to observe is that this scenario is about creating events based on the <em>updated</em> state rather than the original state. Instead, you can do this:</p>
        <pre class="keep-together pdf epub"><code class="nohighlight"><span class="type-name">Outcome</span><span>(</span><span class="type-name">Counter</span><span>(</span><span class="identifier">count</span><span> = </span><span class="number-literal">10</span><span>))
  .</span><span class="identifier">createGlobalEvents</span><span>(</span><span class="identifier">foo</span><span> =&gt; </span><span class="keyword">if</span><span>(</span><span class="identifier">foo</span><span>.</span><span class="identifier">count</span><span> &gt; </span><span class="number-literal">5</span><span>) </span><span class="type-name">Batch</span><span>(</span><span class="type-name">PlaySound</span><span>(</span><span class="type-name">AssetName</span><span>(</span><span class="string-literal">&quot;tada&quot;</span><span>), </span><span class="type-name">Volume</span><span>.</span><span class="type-name">Max</span><span>)) </span><span class="keyword">else</span><span> </span><span class="type-name">Batch</span><span>.</span><span class="identifier">empty</span><span>)</span></code></pre>
        <p>Here, <code>foo</code> is the state held in the <code>Outcome</code>.</p>
        
        <h2 id="error-handling" class="section"><a class="anchor-link left" href="#error-handling"><i class="icofont-laika link">&#xef71;</i></a>Error handling</h2>
        <blockquote>Indigo 0.6.0 or later</blockquote>
        <p>The <code>Outcome</code> type also comes with error handling.</p>
        <p>If an exception is thrown within an outcome&#39;s constructor then it will be caught in a similar way to Scala standard <code>Try</code> monad. E.g.:</p>
        <pre class="keep-together pdf epub"><code class="nohighlight"><span class="type-name">Outcome</span><span>(</span><span class="keyword">throw</span><span> </span><span class="keyword">new</span><span> </span><span class="type-name">Exception</span><span>(</span><span class="string-literal">&quot;Boom!&quot;</span><span>))</span></code></pre>
        <p>Exceptions are a fact of life on the JVM and also in JS. If you access an array index outside it&#39;s range, you&#39;ll get an exception.</p>
        <p>You can model errors with types like <code>Either[Error, A]</code> or as an ADT that live in your <code>Outcome</code> as it&#39;s value:</p>
        <pre class="keep-together pdf epub"><code class="nohighlight"><span class="keyword">sealed</span><span> </span><span class="keyword">trait</span><span> </span><span class="type-name">MyJourney</span><span>
</span><span class="keyword">case</span><span> </span><span class="keyword">object</span><span> </span><span class="type-name">HappyPath</span><span> </span><span class="keyword">extends</span><span> </span><span class="type-name">MyJourney</span><span>
</span><span class="keyword">case</span><span> </span><span class="keyword">object</span><span> </span><span class="type-name">UnhappyPath</span><span> </span><span class="keyword">extends</span><span> </span><span class="type-name">MyJourney</span><span> </span><span class="comment">// Error case</span></code></pre>
        <p>You could think of these as expected unhappy paths. ...but you&#39;re still going to get exceptions from time to time - at least during development.</p>
        <p>In Indigo, the hope it that 99 times out of 100 you can get away with an ADT or an <code>Either</code> because you&#39;ve done lots of testing and the unhappy paths are <em>recoverable</em> in a way that is fairly local to the place where the error occurred so that your game can continue. It would be a shame to crash the game.</p>
        <p>Sometimes though, you can recover <em>eventually</em> but you need to bail out right now. This is where it might be appropriate to throw an exception or raise an error (<code>Outcome.raiseError(e)</code>) in an outcome.</p>
        <p>To handle such an error, we can do the following:</p>
        <blockquote>Please note that - contrary to the following example - you should really only catch exceptions you&#39;re expecting by declaring a class that extends Exception and catching that.</blockquote>
        <pre class="keep-together pdf epub"><code class="nohighlight"><span class="type-name">Outcome</span><span>(</span><span class="number-literal">10</span><span>)
  .</span><span class="identifier">map</span><span>[</span><span class="type-name">Int</span><span>](</span><span class="identifier">_</span><span> =&gt; </span><span class="keyword">throw</span><span> </span><span class="keyword">new</span><span> </span><span class="type-name">Exception</span><span>(</span><span class="string-literal">&quot;Boom!&quot;</span><span>))
  .</span><span class="identifier">map</span><span>(</span><span class="identifier">i</span><span> =&gt; </span><span class="identifier">i</span><span> * </span><span class="identifier">i</span><span>)
  .</span><span class="identifier">handleError</span><span> {
    </span><span class="keyword">case</span><span> </span><span class="identifier">e</span><span> =&gt;
      </span><span class="type-name">Outcome</span><span>(</span><span class="identifier">e</span><span>.</span><span class="identifier">getMessage</span><span>.</span><span class="identifier">length</span><span>)
  }</span></code></pre>
        <p>Here we start with a value and throw an exception during the first map. We attempt to map the value again, but it&#39;s ignored and the exception is carried over. We then handle the error with a partial function that allows us to recover back to a (slightly suspect) <code>Outcome[Int]</code> again.</p>
        <p><strong>If you game is going to crash, then you ought to let it crash.</strong></p>
        <p>That said, if your game is going to crash then it might be helpful to log something useful in the dying moments. Indigo itself looks out for exceptions and attempts to log them before it crashes a game. You can give it something meaningful to log by using the <code>logCrash</code> outcome method. Invoked similarly to <code>handleError</code> above, it is a partial function that takes an exception and returns any string value you like. Indigo then logs this message before the game crashes.</p>
        <pre class="keep-together pdf epub"><code class="nohighlight"><span class="type-name">Outcome</span><span>(</span><span class="number-literal">10</span><span>)
  .</span><span class="identifier">map</span><span>[</span><span class="type-name">Int</span><span>](</span><span class="identifier">i</span><span> =&gt; </span><span class="keyword">throw</span><span> </span><span class="keyword">new</span><span> </span><span class="type-name">Exception</span><span>(</span><span class="identifier">i</span><span>.</span><span class="identifier">toString</span><span>))
  .</span><span class="identifier">map</span><span>(</span><span class="identifier">i</span><span> =&gt; </span><span class="identifier">i</span><span> * </span><span class="identifier">i</span><span>)
  .</span><span class="identifier">logCrash</span><span> {
    </span><span class="keyword">case</span><span> </span><span class="identifier">e</span><span> =&gt;
      </span><span class="string-literal">&quot;The game crashed at integer:&quot;</span><span> + </span><span class="identifier">e</span><span>.</span><span class="identifier">getMessage</span><span>
  }</span></code></pre>

        
<hr class="footer-rule"/>
<footer>
  Site generated by <a href="https://typelevel.org/Laika/">Laika</a> with the Helium theme.
</footer>


      </main>

    </div>

  </body>

</html>