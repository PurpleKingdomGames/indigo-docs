<!DOCTYPE html>
<html lang="en">
  
  <head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="generator" content="Typelevel Laika + Helium Theme" />
  <title>Model, ViewModel, & View</title>
  
  
  <meta name="description" content="An FP game engine for Scala."/>
  
  
  
  <link rel="icon" sizes="32x32" type="image/png" href="../../img/favicon.png"/>
  
  
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lato:400,700">
  
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Fira+Mono:500">
  
  <link rel="stylesheet" type="text/css" href="../../helium/site/icofont.min.css" />
    <link rel="stylesheet" type="text/css" href="../../helium/site/laika-helium.css" />
    <link rel="stylesheet" type="text/css" href="../../css/custom.css" />
  <script src="../../helium/site/laika-helium.js"></script>
  
  
  <script> /* for avoiding page load transitions */ </script>
</head>

  <body>

    <header id="top-bar" class="light-default dark-default">

  <div class="row">
    <a id="nav-icon">
      <i class="icofont-laika navigationMenu" title="Navigation">&#xefa2;</i>
    </a>
    
    
  </div>

  <a class="image-link" href="../"><img src="../../img/indigo_logo_solid_text.svg" alt="An FP game engine for Scala." title="Indigo" width="150" height="50"></a>

  <div class="row links">
    
    <a class="button-link" href="https://purplekingdomgames.github.io/indigo-docs/live_demos">Live Demos</a>
    
    <a class="button-link" href="https://discord.gg/b5CD47g">Discord</a>
    
    <a class="button-link" href="https://github.com/PurpleKingdomGames/indigo">Github</a>
    
  </div>  

</header>
    
    <nav id="sidebar">

  <div class="row">
    
    <a class="button-link" href="https://purplekingdomgames.github.io/indigo-docs/live_demos">Live Demos</a>
    
    <a class="button-link" href="https://discord.gg/b5CD47g">Discord</a>
    
    <a class="button-link" href="https://github.com/PurpleKingdomGames/indigo">Github</a>
    
  </div>

  <ul class="nav-list">
    <li class="level1 nav-node"><a href="../">Indigo</a></li>
    <li class="level2 nav-header">Indigo</li>
    <li class="level3 active nav-leaf"><a href="#">Model, ViewModel, &amp; View</a></li>
    <li class="level3 nav-leaf"><a href="performance.html">Performance</a></li>
    <li class="level3 nav-leaf"><a href="making-games-testable.html">Making games testable</a></li>
    <li class="level2 nav-header">Shaders</li>
    <li class="level3 nav-leaf"><a href="../shaders/shaders.html">Shaders</a></li>
    <li class="level2 nav-header">Quick start</li>
    <li class="level3 nav-leaf"><a href="../quickstart/extensions-and-libs.html">Extensions, Libraries, and Related Projects</a></li>
    <li class="level3 nav-leaf"><a href="../quickstart/quickstart.html">Quick start</a></li>
    <li class="level3 nav-leaf"><a href="../quickstart/examples.html">Examples, Demos, and References</a></li>
    <li class="level2 nav-header">General information</li>
    <li class="level3 nav-leaf"><a href="../misc/prior-art.html">Prior Art</a></li>
    <li class="level3 nav-leaf"><a href="../misc/motivation-and-constraints.html">Motivation &amp; Constraints</a></li>
    <li class="level3 nav-leaf"><a href="../misc/rendering-technology.html">Rendering Technology</a></li>
    <li class="level1 nav-node"><a href="../../demos/">Demos</a></li>
    <li class="level2 nav-leaf"><a href="../../demos/snake/">Snake!</a></li>
    <li class="level2 nav-leaf"><a href="../../demos/snake-in-5-minutes/">Snake In 5 Minutes</a></li>
    <li class="level2 nav-leaf"><a href="../../demos/the-cursed-pirate/">The Cursed Pirate!</a></li>
    <li class="level1 nav-node"><a href="../../guides/">Guides</a></li>
    <li class="level2 nav-node"><a href="../../guides/assets/">Assets</a></li>
    <li class="level3 nav-leaf"><a href="../../guides/assets/preloader/">Preloader / Loading Screens</a></li>
    <li class="level2 nav-node"><a href="../../guides/actors/">Actors</a></li>
    <li class="level3 nav-leaf"><a href="../../guides/actors/actors-with-physics/">How to use physics with actors</a></li>
    <li class="level2 nav-node"><a href="../../guides/importers/">Importers</a></li>
    <li class="level3 nav-leaf"><a href="../../guides/importers/tiled-loaded/">Loading Tiled maps at runtime</a></li>
    <li class="level2 nav-node"><a href="../../guides/scenes/">Scenes</a></li>
    <li class="level3 nav-leaf"><a href="../../guides/scenes/scene-management/">Managing scenes</a></li>
    <li class="level2 nav-node"><a href="../../guides/ui/">Ui</a></li>
    <li class="level3 nav-leaf"><a href="../../guides/ui/radiobuttons/">How to make radio buttons</a></li>
    <li class="level1 nav-node"><a href="../../features/">Features</a></li>
    <li class="level2 nav-node"><a href="../../features/actors-and-performers/">Actors-and-performers</a></li>
    <li class="level3 nav-leaf"><a href="../../features/actors-and-performers/performers/">Performers</a></li>
    <li class="level3 nav-leaf"><a href="../../features/actors-and-performers/performers-with-physics/">Performers &amp; Physics</a></li>
    <li class="level3 nav-leaf"><a href="../../features/actors-and-performers/actors/">Actors</a></li>
    <li class="level2 nav-node"><a href="../../features/physics/">Physics</a></li>
    <li class="level3 nav-leaf"><a href="../../features/physics/basics/">Basic Physics Example</a></li>
    <li class="level2 nav-node"><a href="../../features/shaders/">Shaders</a></li>
    <li class="level3 nav-leaf"><a href="../../features/shaders/basic/">A basic custom shader</a></li>
    <li class="level2 nav-node"><a href="../../features/primitives/">Primitives</a></li>
    <li class="level3 nav-leaf"><a href="../../features/primitives/text/">Text</a></li>
    <li class="level3 nav-leaf"><a href="../../features/primitives/graphic/">Graphic</a></li>
    <li class="level2 nav-node"><a href="../../features/materials/">Materials</a></li>
    <li class="level3 nav-leaf"><a href="../../features/materials/imageeffects/">ImageEffects material</a></li>
    <li class="level3 nav-leaf"><a href="../../features/materials/bitmap/">Bitmap material</a></li>
    <li class="level3 nav-leaf"><a href="../../features/materials/filltypes/">Fill Types</a></li>
    <li class="level2 nav-node"><a href="../../features/scenes/">Scenes</a></li>
    <li class="level3 nav-leaf"><a href="../../features/scenes/minimal/">Minimal scene example</a></li>
    <li class="level2 nav-node"><a href="../../features/ui/">Ui</a></li>
    <li class="level3 nav-leaf"><a href="../../features/ui/hitarea/">UI Components: HitArea</a></li>
    <li class="level3 nav-leaf"><a href="../../features/ui/custom/">UI Components: Custom Components</a></li>
    <li class="level3 nav-leaf"><a href="../../features/ui/switch/">UI Components: Switch</a></li>
    <li class="level3 nav-leaf"><a href="../../features/ui/scrollpane/">UI Components: Scroll Pane</a></li>
    <li class="level3 nav-leaf"><a href="../../features/ui/component-group/">UI Components: Component Group</a></li>
    <li class="level3 nav-leaf"><a href="../../features/ui/window/">UI Components: Windows</a></li>
    <li class="level3 nav-leaf"><a href="../../features/ui/component-list/">UI Components: Component List</a></li>
    <li class="level3 nav-leaf"><a href="../../features/ui/button/">UI Components: Button</a></li>
    <li class="level3 nav-leaf"><a href="../../features/ui/textarea/">UI Components: TextArea</a></li>
    <li class="level3 nav-leaf"><a href="../../features/ui/label/">UI Components: Label</a></li>
    <li class="level3 nav-leaf"><a href="../../features/ui/input/">UI Components: Input</a></li>
    <li class="level3 nav-leaf"><a href="../../features/ui/maskedpane/">UI Components: Masked Pane</a></li>
  </ul>

</nav>

    <div id="container">

      
<nav id="page-nav">
  <p class="header"><a href="#">Model, ViewModel, &amp; View</a></p>

  <ul class="nav-list">
    <li class="level1 nav-leaf"><a href="#separation-of-concerns">Separation of concerns</a></li>
    <li class="level1 nav-leaf"><a href="#seeing-is-believing">Seeing is believing</a></li>
    <li class="level1 nav-leaf"><a href="#working-definitions">Working definitions</a></li>
    <li class="level1 nav-leaf"><a href="#more-on-the-viewmodel">More on the <code>ViewModel</code></a></li>
  </ul>

  <p class="footer"></p>
</nav>


      <main class="content">

        <h1 id="model-viewmodel-view" class="title">Model, ViewModel, &amp; View</h1>
        <p>The standard entry point traits define functions that talk about a <code>Model</code>, a <code>ViewModel</code>, and a &quot;view&quot; (in the form of a <code>present</code> function that returns a <code>SceneUpdateFragment</code>).</p>
        <p>These are terms that will be very familiar to anyone that has worked with any of the many permutations of the MVC pattern, but the definitions can vary quite a bit.</p>
        
        <h2 id="separation-of-concerns" class="section"><a class="anchor-link left" href="#separation-of-concerns"><i class="icofont-laika link">&#xef71;</i></a>Separation of concerns</h2>
        <p>Indigo keeps the model and view completely separate (we&#39;ll come on to the view model later), the aim is to strictly decouple your game&#39;s structures and logic from its presentation. How strictly this is adhered to is entirely up to the game developer, but we recommend keeping them as separate as possible.</p>
        
        <h2 id="seeing-is-believing" class="section"><a class="anchor-link left" href="#seeing-is-believing"><i class="icofont-laika link">&#xef71;</i></a>Seeing is believing</h2>
        <blockquote>The world the player sees and interacts with, is not the game.</blockquote>
        <p>What do server-side programming and Wolfenstein 3D have in common?</p>
        <p>If you&#39;ve ever worked in server-side programming, you will have already come across this idea. The way you represent data in a database is most likely - except in very simple cases - not how it appears when it is accessed by an API. Why not? Because they serve different purposes. One models your data in the most accurate, useful, and domain appropriate way possible, and the other presents it in the format most appropriate for consumption. Fields essential to data storage and business logic calculations are omitted, merged, or have their representations changed and massaged before being served up to the requester.</p>
        <p>Another great example of this is the legendary game <a href="https://en.wikipedia.org/wiki/Wolfenstein_3D">Wolfenstein 3D</a>. Wolfenstein, precursor to Doom, was one of the first really famous &quot;3D&quot; games, filled with high adrenaline action and an immersive (for its time) experience.</p>
        <p>Except... &quot;Wolfenstein 3D&quot; is a 2D game.</p>
        <p>If you could see a mini-map in the corner, it would show a flat blocky level with dots representing baddies moving about, and that is the real game. The mini-map is the model, the mini-map is the game, and the 3D corridors and bad guys filling your viewport are just an amazingly clever bit of presentation work.</p>
        <p>If you&#39;d like to know more, <a href="https://fabiensanglard.net/gebbwolf3d/">Fabien Sanglard&#39;s book</a> goes into every tiny detail.</p>
        
        <h2 id="working-definitions" class="section"><a class="anchor-link left" href="#working-definitions"><i class="icofont-laika link">&#xef71;</i></a>Working definitions</h2>
        <p>Here are the definitions Indigo uses:</p>
        <ul>
          <li><strong>Model</strong> - A pure and abstract representation of your game. Data that models your game&#39;s state with no regard for how it will be presented.</li>
          <li><strong>ViewModel</strong> - Presentation state that is inessential to the game, but improves the visual experience.</li>
          <li><strong>View</strong> - An as-simple-as-possible translation of the model and view model into a visual experience, handling little to no game logic.</li>
        </ul>
        
        <h2 id="more-on-the-viewmodel" class="section"><a class="anchor-link left" href="#more-on-the-viewmodel"><i class="icofont-laika link">&#xef71;</i></a>More on the <code>ViewModel</code></h2>
        <p>We&#39;ve talked a bit about the model and the view, as they are the two most cleanly separated of the three elements.</p>
        <p>The last element is the view model, and arguably it is superfluous. The view model is state used to help produce a visual representation, and could easily be kept as some sub-section of the Model data. Indeed, <code>SubSystem</code>s make no distinction as they assumed to be small and simple enough to be manageable. The point of the view model is that it represents data that matters to the view, but not to the state of the game, and thus helps you to keep your game model clean.</p>
        <blockquote>Trivia: The original Elm Architecture does not feature a view model. The view model is one of a number of the ways in which Indigo has diverged from the canonical TEA pattern. Elm was about Web application development, and so the model tended to be a lot less abstract, and closer to the view&#39;s needs (like our view model!). Game models tend to be a lot more abstract, and thus adding the separation seemed useful.</blockquote>
        <p>Example use of a <code>ViewModel</code>:</p>
        <p>You&#39;ve built a pinball machine game!</p>
        <p>The model stores the players running score as a simple number, and in your prototype, that score is extracted from the model and drawn on the screen by the <code>present</code> function that generates the view.</p>
        <p>Works fine, but lacks excitement. On real pinball machines, as you score more and more points, the scores are multiplied and big numbers start rolling onto the board. That &quot;rolling&quot; is literal, it&#39;s a mechanical process trying to keep up with the massive scores being achieved and it is noisy and it is exciting!!</p>
        <p>In order to simulate that, at minimum we really need:</p>
        <ol class="arabic">
          <li>The actual current score that the player has achieved - the most important thing.</li>
          <li>The score currently on the board (which is lagging behind the real score)</li>
          <li>A value describing how much to increment the score on the board by on each frame tick until it catches up with the actual score.</li>
        </ol>
        <p>Point 1 is clearly an essential business value. If you needed to send a high score to a server for a global leader board - that is the only value you&#39;d care about. As such, it clearly belongs in your games model.</p>
        <p>Points 2 and 3 though are inessential in terms of the integrity of the game&#39;s inner state representation, but important for the <em>feel</em> of the game. The view needs them to draw the effect of the mechanical scoreboard, but they are transient, and putting them in the model itself is an act of coupling or polluting the model with presentation information.</p>
        <p>Instead, we put those two values in the <code>ViewModel</code>. The effect can be rendered, but the model is unaware of the details of how it&#39;s presented.</p>

        
<hr class="footer-rule"/>
<footer>
  Site generated by <a href="https://typelevel.org/Laika/">Laika</a> with the Helium theme.
</footer>


      </main>

    </div>

  </body>

</html>