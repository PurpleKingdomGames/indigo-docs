<!DOCTYPE html>
<html lang="en">
  
  <head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="generator" content="Typelevel Laika + Helium Theme" />
  <title>Signals & Signal Functions</title>
  
  
  <meta name="description" content="An FP game engine for Scala."/>
  
  
  
  <link rel="icon" sizes="32x32" type="image/png" href="../../../img/favicon.png"/>
  
  
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lato:400,700">
  
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Fira+Mono:500">
  
  <link rel="stylesheet" type="text/css" href="../../../helium/site/icofont.min.css" />
    <link rel="stylesheet" type="text/css" href="../../../helium/site/laika-helium.css" />
    <link rel="stylesheet" type="text/css" href="../../../css/custom.css" />
  <script src="../../../helium/site/laika-helium.js"></script>
  
  
  <script> /* for avoiding page load transitions */ </script>
</head>

  <body>

    <header id="top-bar" class="light-default dark-default">

  <div class="row">
    <a id="nav-icon">
      <i class="icofont-laika navigationMenu" title="Navigation">&#xefa2;</i>
    </a>
    
    
  </div>

  <a class="image-link" href="../../../documentation/"><img src="../../../img/indigo_logo_solid_text.svg" alt="An FP game engine for Scala." title="Indigo" width="150" height="50"></a>

  <div class="row links">
    
    <a class="button-link" href="https://purplekingdomgames.github.io/indigo-docs/live_demos">Live Demos</a>
    
    <a class="button-link" href="https://discord.gg/b5CD47g">Discord</a>
    
    <a class="button-link" href="https://github.com/PurpleKingdomGames/indigo">Github</a>
    
  </div>  

</header>
    
    <nav id="sidebar">

  <div class="row">
    
    <a class="button-link" href="https://purplekingdomgames.github.io/indigo-docs/live_demos">Live Demos</a>
    
    <a class="button-link" href="https://discord.gg/b5CD47g">Discord</a>
    
    <a class="button-link" href="https://github.com/PurpleKingdomGames/indigo">Github</a>
    
  </div>

  <ul class="nav-list">
    <li class="level1 nav-node"><a href="../../../documentation/">Indigo</a></li>
    <li class="level2 nav-header">Indigo</li>
    <li class="level3 nav-leaf"><a href="../../../documentation/key-concepts/model-viewmodel-view.html">Model, ViewModel, &amp; View</a></li>
    <li class="level3 nav-leaf"><a href="../../../documentation/key-concepts/time.html">Time</a></li>
    <li class="level3 nav-leaf"><a href="../../../documentation/key-concepts/performance.html">Performance</a></li>
    <li class="level3 nav-leaf"><a href="../../../documentation/key-concepts/making-games-testable.html">Making games testable</a></li>
    <li class="level2 nav-header">Shaders</li>
    <li class="level3 nav-leaf"><a href="../../../documentation/shaders/shaders.html">Shaders</a></li>
    <li class="level2 nav-header">Quick start</li>
    <li class="level3 nav-leaf"><a href="../../../documentation/quickstart/extensions-and-libs.html">Extensions, Libraries, and Related Projects</a></li>
    <li class="level3 nav-leaf"><a href="../../../documentation/quickstart/quickstart.html">Quick start</a></li>
    <li class="level3 nav-leaf"><a href="../../../documentation/quickstart/examples.html">Examples, Demos, and References</a></li>
    <li class="level2 nav-header">General information</li>
    <li class="level3 nav-leaf"><a href="../../../documentation/misc/prior-art.html">Prior Art</a></li>
    <li class="level3 nav-leaf"><a href="../../../documentation/misc/motivation-and-constraints.html">Motivation &amp; Constraints</a></li>
    <li class="level3 nav-leaf"><a href="../../../documentation/misc/rendering-technology.html">Rendering Technology</a></li>
    <li class="level3 nav-leaf"><a href="../../../documentation/misc/indigo-vs-elm.html">Indigo vs Elm</a></li>
    <li class="level1 nav-node"><a href="../../../demos/">Demos</a></li>
    <li class="level2 nav-leaf"><a href="../../../demos/snake/">Snake!</a></li>
    <li class="level2 nav-leaf"><a href="../../../demos/snake-in-5-minutes/">Snake In 5 Minutes</a></li>
    <li class="level2 nav-leaf"><a href="../../../demos/the-cursed-pirate/">The Cursed Pirate!</a></li>
    <li class="level1 nav-node"><a href="../../../guides/">Guides</a></li>
    <li class="level2 nav-node"><a href="../../../guides/actors/">Actors</a></li>
    <li class="level3 nav-leaf"><a href="../../../guides/actors/actors-with-physics/">How to use physics with actors</a></li>
    <li class="level2 nav-node"><a href="../../../guides/animation/">Animation</a></li>
    <li class="level3 nav-leaf"><a href="../../../guides/animation/part-1-basics/">Part 1: Animation Fundamentals</a></li>
    <li class="level3 nav-leaf"><a href="../../../guides/animation/part-2-signals/">Part 2: Using Signals</a></li>
    <li class="level3 nav-leaf"><a href="../../../guides/animation/part-3-timelines/">Part 3: Timeline Animations</a></li>
    <li class="level3 nav-leaf"><a href="../../../guides/animation/part-4-shaders/">Part 4: Shader Animations</a></li>
    <li class="level2 nav-node"><a href="../../../guides/assets/">Assets</a></li>
    <li class="level3 nav-leaf"><a href="../../../guides/assets/preloader/">Preloader / Loading Screens</a></li>
    <li class="level2 nav-node"><a href="../../../guides/importers/">Importers</a></li>
    <li class="level3 nav-leaf"><a href="../../../guides/importers/aseprite-embedded/">Aseprite Embedded</a></li>
    <li class="level3 nav-leaf"><a href="../../../guides/importers/tiled-loaded/">Loading Tiled maps at runtime</a></li>
    <li class="level2 nav-node"><a href="../../../guides/scenes/">Scenes</a></li>
    <li class="level3 nav-leaf"><a href="../../../guides/scenes/scene-management/">Managing scenes</a></li>
    <li class="level2 nav-node"><a href="../../../guides/ui/">Ui</a></li>
    <li class="level3 nav-leaf"><a href="../../../guides/ui/radiobuttons/">How to make radio buttons</a></li>
    <li class="level1 nav-node"><a href="../../">Features</a></li>
    <li class="level2 nav-node"><a href="../../actors-and-performers/">Actors-and-performers</a></li>
    <li class="level3 nav-leaf"><a href="../../actors-and-performers/actors/">Actors</a></li>
    <li class="level3 nav-leaf"><a href="../../actors-and-performers/performers/">Performers</a></li>
    <li class="level3 nav-leaf"><a href="../../actors-and-performers/performers-with-physics/">Performers &amp; Physics</a></li>
    <li class="level2 nav-leaf"><a href="../../context/">Context</a></li>
    <li class="level2 nav-node"><a href="../../materials/">Materials</a></li>
    <li class="level3 nav-leaf"><a href="../../materials/bitmap/">Bitmap material</a></li>
    <li class="level3 nav-leaf"><a href="../../materials/filltypes/">Fill Types</a></li>
    <li class="level3 nav-leaf"><a href="../../materials/imageeffects/">ImageEffects material</a></li>
    <li class="level2 nav-node"><a href="../../physics/">Physics</a></li>
    <li class="level3 nav-leaf"><a href="../../physics/basics/">Basic Physics Example</a></li>
    <li class="level2 nav-node"><a href="../../primitives/">Primitives</a></li>
    <li class="level3 nav-leaf"><a href="../../primitives/blank/">Blank Entity</a></li>
    <li class="level3 nav-leaf"><a href="../../primitives/clip/">Clip</a></li>
    <li class="level3 nav-leaf"><a href="../../primitives/graphic/">Graphic</a></li>
    <li class="level3 nav-leaf"><a href="../../primitives/group/">Group</a></li>
    <li class="level3 nav-node"><a href="../../primitives/shapes/">Shapes</a></li>
    <li class="level4 nav-leaf"><a href="../../primitives/shapes/box/">Shape.Box</a></li>
    <li class="level4 nav-leaf"><a href="../../primitives/shapes/circle/">Shape.Circle</a></li>
    <li class="level4 nav-leaf"><a href="../../primitives/shapes/line/">Shape.Line</a></li>
    <li class="level4 nav-leaf"><a href="../../primitives/shapes/polygon/">Shape.Polygon</a></li>
    <li class="level3 nav-leaf"><a href="../../primitives/sprite/">Sprite</a></li>
    <li class="level3 nav-leaf"><a href="../../primitives/text/">Text</a></li>
    <li class="level2 nav-node"><a href="../../scenes/">Scenes</a></li>
    <li class="level3 nav-leaf"><a href="../../scenes/minimal/">Minimal scene example</a></li>
    <li class="level2 nav-node"><a href="../../shaders/">Shaders</a></li>
    <li class="level3 nav-leaf"><a href="../../shaders/basic/">A basic custom shader</a></li>
    <li class="level2 nav-node"><a href="../">Time</a></li>
    <li class="level3 active nav-leaf"><a href="#">Signals &amp; Signal Functions</a></li>
    <li class="level3 nav-leaf"><a href="../time-varying-values/">Time Varying Values</a></li>
    <li class="level2 nav-node"><a href="../../ui/">Ui</a></li>
    <li class="level3 nav-leaf"><a href="../../ui/button/">UI Components: Button</a></li>
    <li class="level3 nav-leaf"><a href="../../ui/component-group/">UI Components: Component Group</a></li>
    <li class="level3 nav-leaf"><a href="../../ui/component-list/">UI Components: Component List</a></li>
    <li class="level3 nav-leaf"><a href="../../ui/custom/">UI Components: Custom Components</a></li>
    <li class="level3 nav-leaf"><a href="../../ui/hitarea/">UI Components: HitArea</a></li>
    <li class="level3 nav-leaf"><a href="../../ui/input/">UI Components: Input</a></li>
    <li class="level3 nav-leaf"><a href="../../ui/label/">UI Components: Label</a></li>
    <li class="level3 nav-leaf"><a href="../../ui/maskedpane/">UI Components: Masked Pane</a></li>
    <li class="level3 nav-leaf"><a href="../../ui/scrollpane/">UI Components: Scroll Pane</a></li>
    <li class="level3 nav-leaf"><a href="../../ui/switch/">UI Components: Switch</a></li>
    <li class="level3 nav-leaf"><a href="../../ui/textarea/">UI Components: TextArea</a></li>
    <li class="level3 nav-leaf"><a href="../../ui/window/">UI Components: Windows</a></li>
  </ul>

</nav>

    <div id="container">

      
<nav id="page-nav">
  <p class="header"><a href="#">Signals &amp; Signal Functions</a></p>

  <ul class="nav-list">
    <li class="level1 nav-leaf"><a href="#motivation">Motivation</a></li>
    <li class="level1 nav-leaf"><a href="#background">Background</a></li>
    <li class="level1 nav-leaf"><a href="#signals">Signals</a></li>
    <li class="level1 nav-leaf"><a href="#signal-functions">Signal Functions</a></li>
    <li class="level1 nav-leaf"><a href="#example-links">Example Links</a></li>
    <li class="level1 nav-leaf"><a href="#signals-in-action">Signals in Action</a></li>
  </ul>

  <p class="footer"></p>
</nav>


      <main class="content">

        <h1 id="signals-signal-functions" class="title">Signals &amp; Signal Functions</h1>
        
        <h2 id="motivation" class="section"><a class="anchor-link left" href="#motivation"><i class="icofont-laika link">&#xef71;</i></a>Motivation</h2>
        <p>We want pure, referentially transparent, testable, procedural values that change over time, AKA, &#39;animations&#39; (but we can &#39;animate&#39; any value).</p>
        
        <h2 id="background" class="section"><a class="anchor-link left" href="#background"><i class="icofont-laika link">&#xef71;</i></a>Background</h2>
        <p>The goal of Indigo is to make programming games (as opposed to making them...), easier to reason about and easier to test by leveraging the good ideas that come with functional programming.</p>
        <p>One of those good ideas that Indigo borrows is the notion of Signals and Signal Functions. Signals for animation were first proposed in the Functional Reactive ANimation (FRAN) system, but are most readily seen in <a href="https://github.com/ivanperez-keera/Yampa">Yampa</a>.</p>
        <p>Indigo makes use of Signals too, though not to the same extent as FRAN or Yampa. The main difference is that Signals in Indigo are stateless and therefore somewhat limited. Nonetheless, Signals in Indigo are still interesting and useful, and provide a core building block for other systems in Indigo.</p>
        
        <h2 id="signals" class="section"><a class="anchor-link left" href="#signals"><i class="icofont-laika link">&#xef71;</i></a>Signals</h2>
        <p>At it&#39;s core, a signal is a very simple thing. Consider this function signature:</p>
        <pre class="keep-together pdf epub"><code class="nohighlight"><span class="keyword">val</span><span> </span><span class="identifier">f</span><span>: </span><span class="type-name">A</span><span> =&gt; </span><span class="type-name">B</span></code></pre>
        <p>What this function signature says is that when provided some value of type <code>A</code>, it <em>will</em> produce some value of type <code>B</code>. In concrete terms, if we fix the types to known primitives, the follow example says that when given a <code>String</code>, it will return an <code>Int</code>:</p>
        <pre class="keep-together pdf epub"><code class="nohighlight"><span class="keyword">val</span><span> </span><span class="identifier">f</span><span>: </span><span class="type-name">String</span><span> =&gt; </span><span class="type-name">Int</span></code></pre>
        <p>A <code>Signal</code> of <code>A</code> is nothing more than a function that when given the current running time in <code>Seconds</code>, <em>will</em> produce some value of type <code>A</code>.</p>
        <pre class="keep-together pdf epub"><code class="nohighlight"><span class="keyword">val</span><span> </span><span class="identifier">f</span><span>: </span><span class="type-name">Seconds</span><span> =&gt; </span><span class="type-name">A</span></code></pre>
        
        <h2 id="signal-functions" class="section"><a class="anchor-link left" href="#signal-functions"><i class="icofont-laika link">&#xef71;</i></a>Signal Functions</h2>
        <p><code>SignalFunction</code>s allow you to compose functions that operate on signals.</p>
        <p>Signal functions are combinators, and a combinator is a function that takes a function as an argument and returns another function, like this:</p>
        <pre class="keep-together pdf epub"><code class="nohighlight"><span class="comment">// A function that takes as an argument a function that takes an
// Int and returns a String, and then returns a function that
// takes and Int and returns a Boolean
</span><span class="keyword">val</span><span> </span><span class="identifier">f</span><span>: (</span><span class="type-name">Int</span><span> =&gt; </span><span class="type-name">String</span><span>) =&gt; (</span><span class="type-name">Int</span><span> =&gt; </span><span class="type-name">Boolean</span><span>)</span></code></pre>
        <p>A Signal function takes a <code>Signal[A]</code> and returns a <code>Signal[B]</code>.</p>
        <pre class="keep-together pdf epub"><code class="nohighlight"><span class="type-name">SignalFunction</span><span>(</span><span class="identifier">f</span><span>: </span><span class="type-name">Signal</span><span>[</span><span class="type-name">A</span><span>] =&gt; </span><span class="type-name">Signal</span><span>[</span><span class="type-name">B</span><span>])</span></code></pre>
        <p>which is really a combinator:</p>
        <pre class="keep-together pdf epub"><code class="nohighlight"><span class="keyword">val</span><span> </span><span class="identifier">f</span><span>: (</span><span class="type-name">Seconds</span><span> =&gt; </span><span class="type-name">A</span><span>) =&gt; (</span><span class="type-name">Seconds</span><span> =&gt; </span><span class="type-name">B</span><span>)</span></code></pre>
        
        <h2 id="example-links" class="section"><a class="anchor-link left" href="#example-links"><i class="icofont-laika link">&#xef71;</i></a>Example Links</h2>
        <ul>
          <li><a href="https://github.com/PurpleKingdomGames/indigo-docs/blob/main/features/time/signals">View example code</a></li>
        </ul>
        <ul>
          <li><a href="https://purplekingdomgames.github.io/indigo-docs//live_demos/features/time/signals/">Live demo</a></li>
        </ul>
        
        <h2 id="signals-in-action" class="section"><a class="anchor-link left" href="#signals-in-action"><i class="icofont-laika link">&#xef71;</i></a>Signals in Action</h2>
        <p>Let&#39;s set up a contrived set of signal functions and println the results. In our example
        depending on the time, we&#39;re going to make a list of cats or a list of dogs, and vary the length
        of the list. This is not a sensible example, and clearly you could do this in other ways, but
        it&#39;s a nice way to illustrate how signals and signal functions work in the familar terriroty of
        making lists.</p>
        <p>Signals for animation will be explored in the guides.</p>
        <blockquote>Please note that this demo does not show anything visual on the screen, please see the JS
        console in your browser for the output.</blockquote>
        <p>Pulse is a type of signal. Based on the time, it will produce an on/off boolean like:</p>
        <pre><code>//      ____    ____    ____
//  ___|   |___|   |___|   |___</code></pre>
        <pre class="keep-together pdf epub"><code class="nohighlight"><span class="keyword">val</span><span> </span><span class="identifier">signal</span><span> = </span><span class="type-name">Signal</span><span>.</span><span class="type-name">Pulse</span><span>(</span><span class="type-name">Seconds</span><span>(</span><span class="number-literal">1</span><span>))</span></code></pre>
        <ul>
          <li>Taking our &#39;pulse&#39; boolean value, we can choose a range of 1 to 5, or 1 to 10.</li>
        </ul>
        <pre class="keep-together pdf epub"><code class="nohighlight"><span class="keyword">val</span><span> </span><span class="identifier">makeRange</span><span>: </span><span class="type-name">SignalFunction</span><span>[</span><span class="type-name">Boolean</span><span>, </span><span class="type-name">List</span><span>[</span><span class="type-name">Int</span><span>]] =
  </span><span class="type-name">SignalFunction</span><span> { </span><span class="identifier">p</span><span> =&gt;
    </span><span class="keyword">val</span><span> </span><span class="identifier">num</span><span> = </span><span class="keyword">if</span><span> (</span><span class="identifier">p</span><span>) </span><span class="number-literal">10</span><span> </span><span class="keyword">else</span><span> </span><span class="number-literal">5</span><span>
    (</span><span class="number-literal">1</span><span> </span><span class="identifier">to</span><span> </span><span class="identifier">num</span><span>).</span><span class="identifier">toList</span><span>
  }</span></code></pre>
        <ul>
          <li>Using the same boolean, we can also decide if we&#39;re talking about cats or dogs.</li>
        </ul>
        <pre class="keep-together pdf epub"><code class="nohighlight"><span class="keyword">val</span><span> </span><span class="identifier">chooseCatsOrDogs</span><span>: </span><span class="type-name">SignalFunction</span><span>[</span><span class="type-name">Boolean</span><span>, </span><span class="type-name">String</span><span>] =
  </span><span class="type-name">SignalFunction</span><span>(</span><span class="identifier">p</span><span> =&gt; </span><span class="keyword">if</span><span> (</span><span class="identifier">p</span><span>) </span><span class="string-literal">&quot;dog&quot;</span><span> </span><span class="keyword">else</span><span> </span><span class="string-literal">&quot;cat&quot;</span><span>)</span></code></pre>
        <ul>
          <li>Given our lists of numbers and our cats and dogs, we need a way to make the final result.</li>
        </ul>
        <pre class="keep-together pdf epub"><code class="nohighlight"><span class="keyword">val</span><span> </span><span class="identifier">howManyPets</span><span>: </span><span class="type-name">SignalFunction</span><span>[(</span><span class="type-name">List</span><span>[</span><span class="type-name">Int</span><span>], </span><span class="type-name">String</span><span>), </span><span class="type-name">List</span><span>[</span><span class="type-name">String</span><span>]] =
  </span><span class="type-name">SignalFunction</span><span> { </span><span class="keyword">case</span><span> (</span><span class="identifier">l</span><span>, </span><span class="identifier">str</span><span>) =&gt;
    </span><span class="identifier">l</span><span>.</span><span class="identifier">map</span><span>(</span><span class="identifier">_</span><span>.</span><span class="identifier">toString</span><span> + </span><span class="string-literal">&quot; &quot;</span><span> + </span><span class="identifier">str</span><span>)
  }</span></code></pre>
        <p>Finally, we can compose our functions together using a couple of operators:</p>
        <ol class="arabic">
          <li><code>&amp;&amp;&amp;</code> / <code>and</code> - run in parallel and tuple the results</li>
          <li><code>&gt;&gt;&gt;</code> / <code>andThen</code> - compose the functions together from left to right</li>
        </ol>
        <pre class="keep-together pdf epub"><code class="nohighlight"><span class="keyword">val</span><span> </span><span class="identifier">signalFunction</span><span> = (</span><span class="identifier">makeRange</span><span> &amp;&amp;&amp; </span><span class="identifier">chooseCatsOrDogs</span><span>) &gt;&gt;&gt; </span><span class="identifier">howManyPets</span></code></pre>
        <p>To run the examples, we&#39;ll pipe the pulse signal into our signal function using the pipe <code>|&gt;</code>
        operator.</p>
        <pre><code class="nohighlight"><span>  </span><span class="keyword">def</span><span> </span><span class="declaration-name">updateModel</span><span>(
      </span><span class="identifier">context</span><span>: </span><span class="type-name">Context</span><span>[</span><span class="type-name">Unit</span><span>],
      </span><span class="identifier">hasRunOnce</span><span>: </span><span class="type-name">Boolean</span><span>
  ): </span><span class="type-name">GlobalEvent</span><span> =&gt; </span><span class="type-name">Outcome</span><span>[</span><span class="type-name">Boolean</span><span>] =
    </span><span class="keyword">case</span><span> </span><span class="type-name">FrameTick</span><span> </span><span class="keyword">if</span><span> !</span><span class="identifier">hasRunOnce</span><span> =&gt;

      </span><span class="keyword">val</span><span> </span><span class="identifier">allTheDogs</span><span> = (</span><span class="identifier">signal</span><span> |&gt; </span><span class="identifier">signalFunction</span><span>).</span><span class="identifier">at</span><span>(</span><span class="type-name">Seconds</span><span>.</span><span class="identifier">zero</span><span>)
      </span><span class="identifier">println</span><span>(</span><span class="identifier">allTheDogs</span><span>)
      </span><span class="comment">// List(&quot;1 dog&quot;, &quot;2 dog&quot;, &quot;3 dog&quot;, &quot;4 dog&quot;, &quot;5 dog&quot;, &quot;6 dog&quot;, &quot;7 dog&quot;, &quot;8 dog&quot;, &quot;9 dog&quot;, &quot;10 dog&quot;)
</span><span>
      </span><span class="keyword">val</span><span> </span><span class="identifier">allTheCats</span><span> = (</span><span class="identifier">signal</span><span> |&gt; </span><span class="identifier">signalFunction</span><span>).</span><span class="identifier">at</span><span>(</span><span class="type-name">Seconds</span><span>(</span><span class="number-literal">1</span><span>))
      </span><span class="identifier">println</span><span>(</span><span class="identifier">allTheCats</span><span>)
      </span><span class="comment">// List(&quot;1 cat&quot;, &quot;2 cat&quot;, &quot;3 cat&quot;, &quot;4 cat&quot;, &quot;5 cat&quot;)
</span><span>
      </span><span class="type-name">Outcome</span><span>(</span><span class="boolean-literal">true</span><span>)

    </span><span class="keyword">case</span><span> </span><span class="identifier">_</span><span> =&gt;
      </span><span class="type-name">Outcome</span><span>(</span><span class="identifier">hasRunOnce</span><span>)</span></code></pre>

        
<hr class="footer-rule"/>
<footer>
  Site generated by <a href="https://typelevel.org/Laika/">Laika</a> with the Helium theme.
</footer>


      </main>

    </div>

  </body>

</html>