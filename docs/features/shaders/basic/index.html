<!DOCTYPE html>
<html lang="en">
  
  <head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="generator" content="Typelevel Laika + Helium Theme" />
  <title>A basic custom shader</title>
  
  
  <meta name="description" content="An FP game engine for Scala."/>
  
  
  
  <link rel="icon" sizes="32x32" type="image/png" href="../../../img/favicon.png"/>
  
  
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lato:400,700">
  
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Fira+Mono:500">
  
  <link rel="stylesheet" type="text/css" href="../../../helium/site/icofont.min.css" />
    <link rel="stylesheet" type="text/css" href="../../../helium/site/laika-helium.css" />
    <link rel="stylesheet" type="text/css" href="../../../css/custom.css" />
  <script src="../../../helium/site/laika-helium.js"></script>
  
  
  <script> /* for avoiding page load transitions */ </script>
</head>

  <body>

    <header id="top-bar" class="light-default dark-default">

  <div class="row">
    <a id="nav-icon">
      <i class="icofont-laika navigationMenu" title="Navigation">&#xefa2;</i>
    </a>
    
    
  </div>

  <a class="image-link" href="../../../documentation/"><img src="../../../img/indigo_logo_solid_text.svg" alt="An FP game engine for Scala." title="Indigo" width="150" height="50"></a>

  <div class="row links">
    
    <a class="button-link" href="https://purplekingdomgames.github.io/indigo-docs/_live_demos">Live Demos</a>
    
    <a class="button-link" href="https://discord.gg/b5CD47g">Discord</a>
    
    <a class="button-link" href="https://github.com/PurpleKingdomGames/indigo">Github</a>
    
  </div>  

</header>
    
    <nav id="sidebar">

  <div class="row">
    
    <a class="button-link" href="https://purplekingdomgames.github.io/indigo-docs/_live_demos">Live Demos</a>
    
    <a class="button-link" href="https://discord.gg/b5CD47g">Discord</a>
    
    <a class="button-link" href="https://github.com/PurpleKingdomGames/indigo">Github</a>
    
  </div>

  <ul class="nav-list">
    <li class="level1 nav-node"><a href="../../../documentation/">Indigo</a></li>
    <li class="level2 nav-header">Indigo</li>
    <li class="level3 nav-leaf"><a href="../../../documentation/key-concepts/model-viewmodel-view.html">Model, ViewModel, &amp; View</a></li>
    <li class="level3 nav-leaf"><a href="../../../documentation/key-concepts/performance.html">Performance</a></li>
    <li class="level3 nav-leaf"><a href="../../../documentation/key-concepts/making-games-testable.html">Making games testable</a></li>
    <li class="level2 nav-header">Shaders</li>
    <li class="level3 nav-leaf"><a href="../../../documentation/shaders/shaders.html">Shaders</a></li>
    <li class="level2 nav-header">Quick start</li>
    <li class="level3 nav-leaf"><a href="../../../documentation/quickstart/extensions-and-libs.html">Extensions, Libraries, and Related Projects</a></li>
    <li class="level3 nav-leaf"><a href="../../../documentation/quickstart/quickstart.html">Quick start</a></li>
    <li class="level3 nav-leaf"><a href="../../../documentation/quickstart/examples.html">Examples, Demos, and References</a></li>
    <li class="level2 nav-header">General information</li>
    <li class="level3 nav-leaf"><a href="../../../documentation/misc/prior-art.html">Prior Art</a></li>
    <li class="level3 nav-leaf"><a href="../../../documentation/misc/motivation-and-constraints.html">Motivation &amp; Constraints</a></li>
    <li class="level3 nav-leaf"><a href="../../../documentation/misc/rendering-technology.html">Rendering Technology</a></li>
    <li class="level1 nav-node"><a href="../../../demos/">Demos</a></li>
    <li class="level2 nav-leaf"><a href="../../../demos/snake/">Snake!</a></li>
    <li class="level2 nav-leaf"><a href="../../../demos/snake-in-5-minutes/">Snake In 5 Minutes</a></li>
    <li class="level2 nav-leaf"><a href="../../../demos/the-cursed-pirate/">The Cursed Pirate!</a></li>
    <li class="level1 nav-node"><a href="../../../guides/">Guides</a></li>
    <li class="level2 nav-node"><a href="../../../guides/assets/">Assets</a></li>
    <li class="level3 nav-leaf"><a href="../../../guides/assets/preloader/">Preloader / Loading Screens</a></li>
    <li class="level2 nav-node"><a href="../../../guides/actors/">Actors</a></li>
    <li class="level3 nav-leaf"><a href="../../../guides/actors/actors-with-physics/">How to use physics with actors</a></li>
    <li class="level2 nav-node"><a href="../../../guides/importers/">Importers</a></li>
    <li class="level3 nav-leaf"><a href="../../../guides/importers/tiled-loaded/">Loading Tiled maps at runtime</a></li>
    <li class="level2 nav-node"><a href="../../../guides/scenes/">Scenes</a></li>
    <li class="level3 nav-leaf"><a href="../../../guides/scenes/scene-management/">Managing scenes</a></li>
    <li class="level2 nav-node"><a href="../../../guides/ui/">Ui</a></li>
    <li class="level3 nav-leaf"><a href="../../../guides/ui/radiobuttons/">How to make radio buttons</a></li>
    <li class="level1 nav-node"><a href="../../">Features</a></li>
    <li class="level2 nav-node"><a href="../../actors-and-performers/">Actors-and-performers</a></li>
    <li class="level3 nav-leaf"><a href="../../actors-and-performers/performers/">Performers</a></li>
    <li class="level3 nav-leaf"><a href="../../actors-and-performers/performers-with-physics/">Performers &amp; Physics</a></li>
    <li class="level3 nav-leaf"><a href="../../actors-and-performers/actors/">Actors</a></li>
    <li class="level2 nav-node"><a href="../../physics/">Physics</a></li>
    <li class="level3 nav-leaf"><a href="../../physics/basics/">Basic Physics Example</a></li>
    <li class="level2 nav-node"><a href="../">Shaders</a></li>
    <li class="level3 active nav-leaf"><a href="#">A basic custom shader</a></li>
    <li class="level2 nav-node"><a href="../../primitives/">Primitives</a></li>
    <li class="level3 nav-leaf"><a href="../../primitives/text/">Text</a></li>
    <li class="level3 nav-leaf"><a href="../../primitives/graphic/">Graphic</a></li>
    <li class="level2 nav-node"><a href="../../materials/">Materials</a></li>
    <li class="level3 nav-leaf"><a href="../../materials/imageeffects/">ImageEffects material</a></li>
    <li class="level3 nav-leaf"><a href="../../materials/bitmap/">Bitmap material</a></li>
    <li class="level3 nav-leaf"><a href="../../materials/filltypes/">Fill Types</a></li>
    <li class="level2 nav-node"><a href="../../scenes/">Scenes</a></li>
    <li class="level3 nav-leaf"><a href="../../scenes/minimal/">Minimal scene example</a></li>
    <li class="level2 nav-node"><a href="../../ui/">Ui</a></li>
    <li class="level3 nav-leaf"><a href="../../ui/hitarea/">UI Components: HitArea</a></li>
    <li class="level3 nav-leaf"><a href="../../ui/custom/">UI Components: Custom Components</a></li>
    <li class="level3 nav-leaf"><a href="../../ui/switch/">UI Components: Switch</a></li>
    <li class="level3 nav-leaf"><a href="../../ui/scrollpane/">UI Components: Scroll Pane</a></li>
    <li class="level3 nav-leaf"><a href="../../ui/component-group/">UI Components: Component Group</a></li>
    <li class="level3 nav-leaf"><a href="../../ui/window/">UI Components: Windows</a></li>
    <li class="level3 nav-leaf"><a href="../../ui/component-list/">UI Components: Component List</a></li>
    <li class="level3 nav-leaf"><a href="../../ui/button/">UI Components: Button</a></li>
    <li class="level3 nav-leaf"><a href="../../ui/textarea/">UI Components: TextArea</a></li>
    <li class="level3 nav-leaf"><a href="../../ui/label/">UI Components: Label</a></li>
    <li class="level3 nav-leaf"><a href="../../ui/input/">UI Components: Input</a></li>
    <li class="level3 nav-leaf"><a href="../../ui/maskedpane/">UI Components: Masked Pane</a></li>
  </ul>

</nav>

    <div id="container">

      
<nav id="page-nav">
  <p class="header"><a href="#">A basic custom shader</a></p>

  <ul class="nav-list">
    <li class="level1 nav-leaf"><a href="#example-links">Example Links</a></li>
    <li class="level1 nav-leaf"><a href="#how-to-write-and-use-a-custom-shader">How to write and use a custom shader</a></li>
  </ul>

  <p class="footer"></p>
</nav>


      <main class="content">

        <h1 id="a-basic-custom-shader" class="title">A basic custom shader</h1>
        <p>Indigo comes with a number of rendering options and materials, but sometimes you need a custom effect, and this is where shaders come into play.</p>
        <p>Indigo&#39;s rendering is done using WebGL 2.0, and the shader language of WebGL 2.0 is called GLSL, specifically version 300. While it is possible to write shaders for Indigo in GLSL 300 as a string (possibly loaded at compile time via Indigo&#39;s generators), Indigo itself relies on Ultraviolet, a Scala 3 to GLSL transpiler, to do the heavy lifting, and you can use it too for a fun and pleasant shader writing experience.</p>
        <p>See <a href="https://ultraviolet.indigoengine.io/">Ultraviolets docs</a> for more information on Shaders and shader writing.</p>
        
        <h2 id="example-links" class="section"><a class="anchor-link left" href="#example-links"><i class="icofont-laika link">&#xef71;</i></a>Example Links</h2>
        <ul>
          <li><a href="https://github.com/PurpleKingdomGames/indigo-docs/blob/main/features/shaders/basic">View example code</a></li>
        </ul>
        <ul>
          <li><a href="https://purplekingdomgames.github.io/indigo-docs//_live_demos/features/shaders/basic/">Live demo</a></li>
        </ul>
        
        <h2 id="how-to-write-and-use-a-custom-shader" class="section"><a class="anchor-link left" href="#how-to-write-and-use-a-custom-shader"><i class="icofont-laika link">&#xef71;</i></a>How to write and use a custom shader</h2>
        <p>We&#39;ll need an extra import for shader writing with Ultraviolet:</p>
        <pre class="keep-together pdf epub"><code class="nohighlight"><span class="keyword">import</span><span> </span><span class="identifier">ultraviolet</span><span>.</span><span class="identifier">syntax</span><span>.*</span></code></pre>
        <p>We then need to add our custom shader to the list of shaders:</p>
        <pre class="keep-together pdf epub"><code class="nohighlight"><span class="keyword">val</span><span> </span><span class="identifier">shaders</span><span>: </span><span class="type-name">Set</span><span>[</span><span class="type-name">ShaderProgram</span><span>] = </span><span class="type-name">Set</span><span>(</span><span class="type-name">CustomShader</span><span>.</span><span class="identifier">shader</span><span>)</span></code></pre>
        <p>A <code>BlankEntity</code> is then used to display the shader. A BlankEntity is the most basic form of
        entity, literally just registering a space on the screen, with no notion of how to paint into
        it until you supply a shader to do the work.</p>
        <pre class="keep-together pdf epub"><code class="nohighlight"><span class="keyword">def</span><span> </span><span class="declaration-name">present</span><span>(</span><span class="identifier">context</span><span>: </span><span class="type-name">Context</span><span>[</span><span class="type-name">Unit</span><span>], </span><span class="identifier">model</span><span>: </span><span class="type-name">Unit</span><span>): </span><span class="type-name">Outcome</span><span>[</span><span class="type-name">SceneUpdateFragment</span><span>] =
  </span><span class="type-name">Outcome</span><span>(
    </span><span class="type-name">SceneUpdateFragment</span><span>(
      </span><span class="type-name">BlankEntity</span><span>(</span><span class="number-literal">10</span><span>, </span><span class="number-literal">10</span><span>, </span><span class="number-literal">200</span><span>, </span><span class="number-literal">200</span><span>, </span><span class="type-name">ShaderData</span><span>(</span><span class="type-name">CustomShader</span><span>.</span><span class="identifier">shader</span><span>.</span><span class="identifier">id</span><span>))
    )
  )</span></code></pre>
        <p>The job of our shader is to manufacture a colour for each fragment (read: pixel - kinda..),
        defined at a vec4 of floats for the red, green, blue, and alpha values.</p>
        <p>The custom shader is defined in two parts:</p>
        <ol class="arabic">
          <li>The shader definition, in this case and ultraviolet fragment shader with a unique id, and a
          reference to the shader code with it&#39;s supplied environment.</li>
          <li>The shader code itself. In this case we&#39;ve made a fragment shader that cycles through the
          colour wheel. (This is based on the default <a href="https://www.shadertoy.com/">shadertoy</a> code!)</li>
        </ol>
        <pre><code class="nohighlight"><span class="keyword">object</span><span> </span><span class="type-name">CustomShader</span><span>:

  </span><span class="keyword">val</span><span> </span><span class="identifier">shader</span><span>: </span><span class="type-name">ShaderProgram</span><span> =
    </span><span class="type-name">UltravioletShader</span><span>.</span><span class="identifier">entityFragment</span><span>(
      </span><span class="type-name">ShaderId</span><span>(</span><span class="string-literal">&quot;custom-shader&quot;</span><span>),
      </span><span class="type-name">EntityShader</span><span>.</span><span class="identifier">fragment</span><span>[</span><span class="type-name">FragmentEnv</span><span>](</span><span class="identifier">fragment</span><span>, </span><span class="type-name">FragmentEnv</span><span>.</span><span class="identifier">reference</span><span>)
    )

  </span><span class="identifier">inline</span><span> </span><span class="keyword">def</span><span> </span><span class="declaration-name">fragment</span><span>: </span><span class="type-name">Shader</span><span>[</span><span class="type-name">FragmentEnv</span><span>, </span><span class="type-name">Unit</span><span>] =
    </span><span class="type-name">Shader</span><span>[</span><span class="type-name">FragmentEnv</span><span>] { </span><span class="identifier">env</span><span> =&gt;
      </span><span class="keyword">def</span><span> </span><span class="declaration-name">fragment</span><span>(</span><span class="identifier">color</span><span>: </span><span class="identifier">vec4</span><span>): </span><span class="identifier">vec4</span><span> =
        </span><span class="keyword">val</span><span> </span><span class="identifier">col</span><span>: </span><span class="identifier">vec3</span><span> = </span><span class="number-literal">0.5f</span><span> + </span><span class="number-literal">0.5f</span><span> * </span><span class="identifier">cos</span><span>(</span><span class="identifier">env</span><span>.</span><span class="type-name">TIME</span><span> + </span><span class="identifier">env</span><span>.</span><span class="type-name">UV</span><span>.</span><span class="identifier">xyx</span><span> + </span><span class="identifier">vec3</span><span>(</span><span class="number-literal">0.0f</span><span>, </span><span class="number-literal">2.0f</span><span>, </span><span class="number-literal">4.0f</span><span>))
        </span><span class="identifier">vec4</span><span>(</span><span class="identifier">col</span><span>, </span><span class="number-literal">1.0f</span><span>)
    }</span></code></pre>

        
<hr class="footer-rule"/>
<footer>
  Site generated by <a href="https://typelevel.org/Laika/">Laika</a> with the Helium theme.
</footer>


      </main>

    </div>

  </body>

</html>